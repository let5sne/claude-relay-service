import{r as _,q as K,x as c,y as i,z as t,K as w,aV as B,aT as z,P as r,Q as I,ac as L,C as D,c as W,L as U,O as q,aX as st,o as at,V as ot,_ as et,Y as G,aq as A,B as Z,D as lt,I as J,S as tt,R as Q}from"./vue-vendor-Bsazo-x0.js";import{c as F,s as Y,a as rt,_ as H}from"./index-CQEIyxBb.js";import{C as nt}from"./chart-D0-mP5KW.js";import{R as it}from"./vendor-CrxIEVZC.js";import"./element-plus-DcHmMMW3.js";const dt={class:"cost-efficiency-analysis"},ut={class:"card p-6"},ct={class:"mb-6 flex items-center justify-between"},gt={class:"flex gap-3"},pt={key:0,class:"flex h-64 items-center justify-center"},xt={key:1},yt={class:"mb-6 grid grid-cols-1 gap-4 md:grid-cols-3"},mt={class:"rounded-lg bg-gradient-to-br from-blue-50 to-indigo-50 p-4 dark:from-blue-900/20 dark:to-indigo-900/20"},vt={class:"mt-1 text-2xl font-bold text-gray-900 dark:text-gray-100"},ft={class:"rounded-lg bg-gradient-to-br from-green-50 to-emerald-50 p-4 dark:from-green-900/20 dark:to-emerald-900/20"},bt={class:"mt-1 text-2xl font-bold text-gray-900 dark:text-gray-100"},kt={class:"rounded-lg bg-gradient-to-br from-purple-50 to-pink-50 p-4 dark:from-purple-900/20 dark:to-pink-900/20"},$t={class:"mt-1 text-2xl font-bold text-gray-900 dark:text-gray-100"},ht={class:"overflow-x-auto"},_t={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Ct={class:"divide-y divide-gray-200 bg-white dark:divide-gray-700 dark:bg-gray-900"},wt={class:"px-4 py-3 text-sm font-medium text-gray-900 dark:text-gray-100"},Pt={class:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400"},St={class:"rounded-full bg-blue-100 px-2 py-1 text-xs dark:bg-blue-900/30"},Tt={class:"px-4 py-3 text-right text-sm text-gray-900 dark:text-gray-100"},Ft={class:"px-4 py-3 text-right text-sm text-gray-900 dark:text-gray-100"},Vt={class:"px-4 py-3 text-right text-sm text-gray-900 dark:text-gray-100"},At={class:"px-4 py-3 text-right text-sm font-medium text-gray-900 dark:text-gray-100"},Ut={class:"px-4 py-3 text-right text-sm text-gray-900 dark:text-gray-100"},Dt={__name:"CostEfficiencyAnalysis",setup(P){const v=_(!1),b=_({range:"30d",platform:"all"}),C=_({}),d=_([]),a=y=>y>=1e6?(y/1e6).toFixed(2)+"M":y>=1e3?(y/1e3).toFixed(2)+"K":(y==null?void 0:y.toString())||"0",k=async()=>{var y;v.value=!0;try{const g={...b.value},[T,m]=await Promise.all([F.get("/admin/dashboard/cost-efficiency/summary",{params:g}),F.get("/admin/dashboard/cost-efficiency/accounts",{params:{...g,limit:50}})]);T.success&&(C.value=T.data||{}),m.success&&(d.value=((y=m.data)==null?void 0:y.items)||[])}catch{Y("加载性价比数据失败","error")}finally{v.value=!1}};return K(()=>{k()}),(y,g)=>{var T,m,s;return i(),c("div",dt,[t("div",ut,[t("div",ct,[g[4]||(g[4]=t("div",null,[t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},"账户性价比对比"),t("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"}," 对比不同账户的成本效率和使用情况 ")],-1)),t("div",gt,[w(t("select",{"onUpdate:modelValue":g[0]||(g[0]=e=>b.value.range=e),class:"rounded-lg border border-gray-300 px-3 py-2 text-sm dark:border-gray-600 dark:bg-gray-800",onChange:k},g[2]||(g[2]=[t("option",{value:"today"},"今日",-1),t("option",{value:"7days"},"7天",-1),t("option",{value:"30d"},"30天",-1),t("option",{value:"total"},"全部",-1)]),544),[[B,b.value.range]]),w(t("select",{"onUpdate:modelValue":g[1]||(g[1]=e=>b.value.platform=e),class:"rounded-lg border border-gray-300 px-3 py-2 text-sm dark:border-gray-600 dark:bg-gray-800",onChange:k},g[3]||(g[3]=[z('<option value="all">全部平台</option><option value="claude">Claude</option><option value="claude-console">Console</option><option value="gemini">Gemini</option><option value="openai">OpenAI</option>',5)]),544),[[B,b.value.platform]])])]),v.value?(i(),c("div",pt,g[5]||(g[5]=[t("div",{class:"loading-spinner h-12 w-12 border-4 border-indigo-500"},null,-1)]))):(i(),c("div",xt,[t("div",yt,[t("div",mt,[g[6]||(g[6]=t("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"总账户数",-1)),t("div",vt,r(((T=C.value.totals)==null?void 0:T.accountCount)||0),1)]),t("div",ft,[g[7]||(g[7]=t("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"平均成本/百万Token",-1)),t("div",bt," $"+r((((m=C.value.totals)==null?void 0:m.costPerMillion)||0).toFixed(2)),1)]),t("div",kt,[g[8]||(g[8]=t("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"平均成功率",-1)),t("div",$t,r(((((s=C.value.totals)==null?void 0:s.successRate)||0)*100).toFixed(1))+"% ",1)])]),t("div",ht,[t("table",_t,[g[9]||(g[9]=t("thead",{class:"bg-gray-50 dark:bg-gray-800"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase text-gray-500 dark:text-gray-400"}," 账户 "),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase text-gray-500 dark:text-gray-400"}," 平台 "),t("th",{class:"px-4 py-3 text-right text-xs font-medium uppercase text-gray-500 dark:text-gray-400"}," 请求数 "),t("th",{class:"px-4 py-3 text-right text-xs font-medium uppercase text-gray-500 dark:text-gray-400"}," 总Token "),t("th",{class:"px-4 py-3 text-right text-xs font-medium uppercase text-gray-500 dark:text-gray-400"}," 总成本 "),t("th",{class:"px-4 py-3 text-right text-xs font-medium uppercase text-gray-500 dark:text-gray-400"}," 成本/百万Token "),t("th",{class:"px-4 py-3 text-right text-xs font-medium uppercase text-gray-500 dark:text-gray-400"}," 成功率 ")])],-1)),t("tbody",Ct,[(i(!0),c(I,null,L(d.value,e=>(i(),c("tr",{key:e.accountId,class:"hover:bg-gray-50 dark:hover:bg-gray-800"},[t("td",wt,r(e.accountName),1),t("td",Pt,[t("span",St,r(e.platform),1)]),t("td",Tt,r(a(e.totalRequests)),1),t("td",Ft,r(a(e.totalTokens)),1),t("td",Vt," $"+r((e.totalCost||0).toFixed(6)),1),t("td",At," $"+r((e.costPerMillion||0).toFixed(2)),1),t("td",Ut,[t("span",{class:D(["rounded-full px-2 py-1 text-xs",e.successRate>=.95?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300":e.successRate>=.8?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300"])},r(((e.successRate||0)*100).toFixed(1))+"% ",3)])]))),128))])])])]))])])}}},Mt={class:"api-key-breakdown-analysis"},Rt={class:"card p-6"},qt={class:"mb-6 flex items-center justify-between"},It={class:"flex gap-3"},Bt=["value"],Lt={key:0,class:"flex h-64 items-center justify-center"},Et={key:1,class:"flex h-64 flex-col items-center justify-center text-gray-500"},jt={key:2},Nt={class:"mb-6 grid grid-cols-1 gap-4 md:grid-cols-3"},Kt={class:"rounded-lg bg-gradient-to-br from-blue-50 to-indigo-50 p-4 dark:from-blue-900/20 dark:to-indigo-900/20"},Ot={class:"mt-1 text-2xl font-bold text-gray-900 dark:text-gray-100"},Yt={class:"rounded-lg bg-gradient-to-br from-green-50 to-emerald-50 p-4 dark:from-green-900/20 dark:to-emerald-900/20"},zt={class:"mt-1 text-2xl font-bold text-gray-900 dark:text-gray-100"},Gt={class:"rounded-lg bg-gradient-to-br from-purple-50 to-pink-50 p-4 dark:from-purple-900/20 dark:to-pink-900/20"},Ht={class:"mt-1 text-2xl font-bold text-gray-900 dark:text-gray-100"},Qt={class:"overflow-x-auto"},Wt={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Xt={class:"divide-y divide-gray-200 bg-white dark:divide-gray-700 dark:bg-gray-900"},Zt=["onClick"],Jt={class:"px-4 py-3 text-sm font-medium text-gray-900 dark:text-gray-100"},te={class:"px-4 py-3 text-right text-sm text-gray-900 dark:text-gray-100"},ee={class:"px-4 py-3 text-right text-sm text-gray-600 dark:text-gray-400"},se={class:"px-4 py-3 text-right text-sm text-gray-600 dark:text-gray-400"},ae={class:"px-4 py-3 text-right text-sm text-gray-600 dark:text-gray-400"},oe={class:"px-4 py-3 text-right text-sm text-gray-600 dark:text-gray-400"},le={class:"px-4 py-3 text-right text-sm font-medium text-gray-900 dark:text-gray-100"},re={class:"px-4 py-3 text-right text-sm font-medium text-gray-900 dark:text-gray-100"},ne={class:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400"},ie={class:"bg-gray-50 px-4 py-4 dark:bg-gray-800/50",colspan:"9"},de={key:0,class:"flex justify-center py-4"},ue={key:1,class:"space-y-2"},ce={class:"mb-2 text-sm font-medium text-gray-700 dark:text-gray-300"},ge={class:"max-h-96 overflow-y-auto"},pe={class:"min-w-full text-xs"},xe={class:"divide-y divide-gray-200 dark:divide-gray-600"},ye={class:"px-3 py-2 text-gray-700 dark:text-gray-300"},me={class:"px-3 py-2 text-gray-700 dark:text-gray-300"},ve={class:"px-3 py-2 text-right text-gray-600 dark:text-gray-400"},fe={class:"px-3 py-2 text-right text-gray-600 dark:text-gray-400"},be={class:"px-3 py-2 text-right text-gray-600 dark:text-gray-400"},ke={class:"px-3 py-2 text-right text-gray-600 dark:text-gray-400"},$e={class:"px-3 py-2 text-right font-medium text-gray-900 dark:text-gray-100"},he={class:"px-3 py-2 text-right font-medium text-gray-900 dark:text-gray-100"},_e={class:"px-3 py-2 text-center"},Ce={key:0,class:"rounded bg-yellow-100 px-2 py-1 text-xs text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300",title:"此请求的 token 数据需要人工核对"},we={key:1,class:"rounded bg-blue-100 px-2 py-1 text-xs text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",title:"此记录已手动更新"},Pe={key:2,class:"rounded bg-green-100 px-2 py-1 text-xs text-green-800 dark:bg-green-900/30 dark:text-green-300"},Se={key:2,class:"py-4 text-center text-sm text-gray-500"},Te={key:3,class:"flex h-64 flex-col items-center justify-center text-gray-500"},Fe={__name:"ApiKeyBreakdownAnalysis",setup(P){const v=_(!1),b=_([]),C=_(""),d=_({range:"30d"}),a=_([]),k=_(new Set),y=_({}),g=_({}),T=W(()=>a.value.reduce((l,u)=>l+(u.requests||0),0)),m=W(()=>a.value.reduce((l,u)=>l+(u.totalCost||0),0)),s=l=>l>=1e6?(l/1e6).toFixed(2)+"M":l>=1e3?(l/1e3).toFixed(2)+"K":(l==null?void 0:l.toString())||"0",e=l=>{if(!l)return"-";const u=new Date(l);return Number.isNaN(u.getTime())?l:`${u.getFullYear()}-${String(u.getMonth()+1).padStart(2,"0")}-${String(u.getDate()).padStart(2,"0")} ${String(u.getHours()).padStart(2,"0")}:${String(u.getMinutes()).padStart(2,"0")}`},p=l=>{if(!l)return"-";const u=new Date(l);if(Number.isNaN(u.getTime()))return l;const $=String(u.getMonth()+1).padStart(2,"0"),R=String(u.getDate()).padStart(2,"0"),x=String(u.getHours()).padStart(2,"0"),f=String(u.getMinutes()).padStart(2,"0"),n=String(u.getSeconds()).padStart(2,"0");return`${$}-${R} ${x}:${f}:${n}`},V=async()=>{try{const l=await F.get("/admin/accounts/usage-stats",{params:{range:"total"}});l.success&&(b.value=l.data||[])}catch{Y("加载账户列表失败","error")}},M=async()=>{if(!C.value){a.value=[];return}v.value=!0;try{const l=await F.get(`/admin/accounts/${C.value}/usage-breakdown`,{params:{...d.value,limit:100}});l.success&&(a.value=l.items||[],k.value.clear(),g.value={})}catch{Y("加载 API Key 明细失败","error")}finally{v.value=!1}},h=async l=>{k.value.has(l)?(k.value.delete(l),k.value=new Set(k.value)):(k.value.add(l),k.value=new Set(k.value),await o(l))},o=async l=>{y.value[l]=!0;try{const u=await F.get(`/admin/api-keys/${l}/usage-details`,{params:{range:d.value.range,limit:50}});u.success&&(g.value[l]=u.items||[])}catch{Y("加载请求详情失败","error"),g.value[l]=[]}finally{y.value[l]=!1}};return K(()=>{V()}),(l,u)=>(i(),c("div",Mt,[t("div",Rt,[t("div",qt,[u[4]||(u[4]=t("div",null,[t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},"API Key 调用明细"),t("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"}," 查看每个 API Key 的详细调用统计 ")],-1)),t("div",It,[w(t("select",{"onUpdate:modelValue":u[0]||(u[0]=$=>C.value=$),class:"rounded-lg border border-gray-300 px-3 py-2 text-sm dark:border-gray-600 dark:bg-gray-800",onChange:M},[u[2]||(u[2]=t("option",{value:""},"选择账户",-1)),(i(!0),c(I,null,L(b.value,$=>(i(),c("option",{key:$.id,value:$.id},r($.name)+" ("+r($.platform)+") ",9,Bt))),128))],544),[[B,C.value]]),w(t("select",{"onUpdate:modelValue":u[1]||(u[1]=$=>d.value.range=$),class:"rounded-lg border border-gray-300 px-3 py-2 text-sm dark:border-gray-600 dark:bg-gray-800",onChange:M},u[3]||(u[3]=[t("option",{value:"today"},"今日",-1),t("option",{value:"7days"},"7天",-1),t("option",{value:"30d"},"30天",-1),t("option",{value:"total"},"全部",-1)]),544),[[B,d.value.range]])])]),v.value?(i(),c("div",Lt,u[5]||(u[5]=[t("div",{class:"loading-spinner h-12 w-12 border-4 border-indigo-500"},null,-1)]))):C.value?a.value.length>0?(i(),c("div",jt,[t("div",Nt,[t("div",Kt,[u[7]||(u[7]=t("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"API Key 总数",-1)),t("div",Ot,r(a.value.length),1)]),t("div",Yt,[u[8]||(u[8]=t("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"总请求数",-1)),t("div",zt,r(s(T.value)),1)]),t("div",Gt,[u[9]||(u[9]=t("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"总成本",-1)),t("div",Ht," $"+r(m.value.toFixed(6)),1)])]),t("div",Qt,[t("table",Wt,[u[12]||(u[12]=t("thead",{class:"bg-gray-50 dark:bg-gray-800"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase text-gray-500 dark:text-gray-400"}," API Key "),t("th",{class:"px-4 py-3 text-right text-xs font-medium uppercase text-gray-500 dark:text-gray-400"}," 请求数 "),t("th",{class:"px-4 py-3 text-right text-xs font-medium uppercase text-gray-500 dark:text-gray-400"}," 输入Token "),t("th",{class:"px-4 py-3 text-right text-xs font-medium uppercase text-gray-500 dark:text-gray-400"}," 输出Token "),t("th",{class:"px-4 py-3 text-right text-xs font-medium uppercase text-gray-500 dark:text-gray-400"}," 缓存创建 "),t("th",{class:"px-4 py-3 text-right text-xs font-medium uppercase text-gray-500 dark:text-gray-400"}," 缓存读取 "),t("th",{class:"px-4 py-3 text-right text-xs font-medium uppercase text-gray-500 dark:text-gray-400"}," 总Token "),t("th",{class:"px-4 py-3 text-right text-xs font-medium uppercase text-gray-500 dark:text-gray-400"}," 总成本 "),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase text-gray-500 dark:text-gray-400"}," 最后使用 ")])],-1)),t("tbody",Xt,[(i(!0),c(I,null,L(a.value,$=>{var R;return i(),c(I,{key:$.apiKeyId},[t("tr",{class:"cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800",onClick:x=>h($.apiKeyId)},[t("td",Jt,[t("i",{class:D(["mr-2 text-xs text-gray-400",k.value.has($.apiKeyId)?"fas fa-chevron-down":"fas fa-chevron-right"])},null,2),q(" "+r($.apiKeyName),1)]),t("td",te,r(s($.requests)),1),t("td",ee,r(s($.inputTokens)),1),t("td",se,r(s($.outputTokens)),1),t("td",ae,r(s($.cacheCreateTokens||0)),1),t("td",oe,r(s($.cacheReadTokens||0)),1),t("td",le,r(s($.totalTokens)),1),t("td",re," $"+r(($.totalCost||0).toFixed(6)),1),t("td",ne,r(e($.lastUsedAt)),1)],8,Zt),k.value.has($.apiKeyId)?(i(),c("tr",{key:`${$.apiKeyId}-details`},[t("td",ie,[y.value[$.apiKeyId]?(i(),c("div",de,u[10]||(u[10]=[t("div",{class:"loading-spinner h-8 w-8 border-4 border-indigo-500"},null,-1)]))):((R=g.value[$.apiKeyId])==null?void 0:R.length)>0?(i(),c("div",ue,[t("div",ce," 详细请求记录 (最近 "+r(g.value[$.apiKeyId].length)+" 条) ",1),t("div",ge,[t("table",pe,[u[11]||(u[11]=t("thead",{class:"bg-gray-100 dark:bg-gray-700"},[t("tr",null,[t("th",{class:"px-3 py-2 text-left text-gray-600 dark:text-gray-300"}," 时间 "),t("th",{class:"px-3 py-2 text-left text-gray-600 dark:text-gray-300"}," 模型 "),t("th",{class:"px-3 py-2 text-right text-gray-600 dark:text-gray-300"}," 输入 "),t("th",{class:"px-3 py-2 text-right text-gray-600 dark:text-gray-300"}," 输出 "),t("th",{class:"px-3 py-2 text-right text-gray-600 dark:text-gray-300"}," 缓存创建 "),t("th",{class:"px-3 py-2 text-right text-gray-600 dark:text-gray-300"}," 缓存读取 "),t("th",{class:"px-3 py-2 text-right text-gray-600 dark:text-gray-300"}," 总计 "),t("th",{class:"px-3 py-2 text-right text-gray-600 dark:text-gray-300"}," 费用 "),t("th",{class:"px-3 py-2 text-center text-gray-600 dark:text-gray-300"}," 状态 ")])],-1)),t("tbody",xe,[(i(!0),c(I,null,L(g.value[$.apiKeyId],x=>{var f,n;return i(),c("tr",{key:x.id,class:"hover:bg-gray-100 dark:hover:bg-gray-700"},[t("td",ye,r(p(x.occurred_at)),1),t("td",me,r(x.model),1),t("td",ve,r(x.input_tokens),1),t("td",fe,r(x.output_tokens),1),t("td",be,r(x.cache_create_tokens),1),t("td",ke,r(x.cache_read_tokens),1),t("td",$e,r(x.total_tokens),1),t("td",he," $"+r(parseFloat(x.total_cost||0).toFixed(6)),1),t("td",_e,[(f=x.metadata)!=null&&f._no_usage_data?(i(),c("span",Ce," 需核对 ")):(n=x.metadata)!=null&&n._manually_updated?(i(),c("span",we," 已更新 ")):(i(),c("span",Pe," 正常 "))])])}),128))])])])])):(i(),c("div",Se,"暂无详细记录"))])])):U("",!0)],64)}),128))])])])])):(i(),c("div",Te,u[13]||(u[13]=[t("i",{class:"fas fa-inbox mb-4 text-4xl"},null,-1),t("p",null,"该账户暂无 API Key 调用数据",-1)]))):(i(),c("div",Et,u[6]||(u[6]=[t("i",{class:"fas fa-key mb-4 text-4xl"},null,-1),t("p",null,"请选择一个账户查看 API Key 调用明细",-1)])))])]))}},Ve={class:"cost-trends-analysis"},Ae={class:"card p-6"},Ue={class:"mb-6 flex items-center justify-between"},De={class:"flex gap-3"},Me={key:0,class:"flex h-64 items-center justify-center"},Re={key:1},qe={class:"mb-6 h-80"},Ie={class:"grid grid-cols-1 gap-4 md:grid-cols-4"},Be={class:"rounded-lg bg-gradient-to-br from-blue-50 to-indigo-50 p-4 dark:from-blue-900/20 dark:to-indigo-900/20"},Le={class:"mt-1 text-xl font-bold text-gray-900 dark:text-gray-100"},Ee={class:"rounded-lg bg-gradient-to-br from-green-50 to-emerald-50 p-4 dark:from-green-900/20 dark:to-emerald-900/20"},je={class:"mt-1 text-xl font-bold text-gray-900 dark:text-gray-100"},Ne={class:"rounded-lg bg-gradient-to-br from-purple-50 to-pink-50 p-4 dark:from-purple-900/20 dark:to-pink-900/20"},Ke={class:"mt-1 text-xl font-bold text-gray-900 dark:text-gray-100"},Oe={class:"rounded-lg bg-gradient-to-br from-orange-50 to-red-50 p-4 dark:from-orange-900/20 dark:to-red-900/20"},Ye={__name:"CostTrendsAnalysis",setup(P){const v=rt(),{isDarkMode:b}=st(v),C=_(!1),d=_(null);let a=null;const k=_({range:"30d",interval:"daily"}),y=_([]),g=W(()=>{if(y.value.length===0)return{totalCost:0,avgCost:0,maxCost:0,growthRate:0};const s=y.value.map(l=>l.cost||0),e=s.reduce((l,u)=>l+u,0),p=e/s.length,V=Math.max(...s),M=s[0]||0,h=s[s.length-1]||0,o=M>0?(h-M)/M*100:0;return{totalCost:e,avgCost:p,maxCost:V,growthRate:o}}),T=async()=>{var s;C.value=!0;try{const e=await F.get("/admin/dashboard/cost-efficiency/trends",{params:k.value});e.success&&(y.value=((s=e.data)==null?void 0:s.data)||[],m())}catch{Y("加载趋势数据失败","error")}finally{C.value=!1}},m=()=>{if(!d.value||y.value.length===0)return;a&&a.destroy();const s=y.value.map(p=>p.date||p.label),e=y.value.map(p=>p.cost||0);a=new nt(d.value,{type:"line",data:{labels:s,datasets:[{label:"成本",data:e,borderColor:"rgb(99, 102, 241)",backgroundColor:"rgba(99, 102, 241, 0.1)",fill:!0,tension:.4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:p=>`成本: $${p.parsed.y.toFixed(6)}`}}},scales:{y:{beginAtZero:!0,ticks:{callback:p=>`$${p.toFixed(6)}`,color:b.value?"#9ca3af":"#6b7280"},grid:{color:b.value?"rgba(75, 85, 99, 0.3)":"rgba(0, 0, 0, 0.1)"}},x:{ticks:{color:b.value?"#9ca3af":"#6b7280"},grid:{color:b.value?"rgba(75, 85, 99, 0.3)":"rgba(0, 0, 0, 0.1)"}}}}})};return at(b,()=>{m()}),K(()=>{T()}),ot(()=>{a&&a.destroy()}),(s,e)=>(i(),c("div",Ve,[t("div",Ae,[t("div",Ue,[e[4]||(e[4]=t("div",null,[t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},"成本趋势分析"),t("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},"查看成本变化趋势和预测")],-1)),t("div",De,[w(t("select",{"onUpdate:modelValue":e[0]||(e[0]=p=>k.value.range=p),class:"rounded-lg border border-gray-300 px-3 py-2 text-sm dark:border-gray-600 dark:bg-gray-800",onChange:T},e[2]||(e[2]=[t("option",{value:"7days"},"7天",-1),t("option",{value:"30d"},"30天",-1),t("option",{value:"90d"},"90天",-1)]),544),[[B,k.value.range]]),w(t("select",{"onUpdate:modelValue":e[1]||(e[1]=p=>k.value.interval=p),class:"rounded-lg border border-gray-300 px-3 py-2 text-sm dark:border-gray-600 dark:bg-gray-800",onChange:T},e[3]||(e[3]=[t("option",{value:"hourly"},"按小时",-1),t("option",{value:"daily"},"按天",-1),t("option",{value:"weekly"},"按周",-1)]),544),[[B,k.value.interval]])])]),C.value?(i(),c("div",Me,e[5]||(e[5]=[t("div",{class:"loading-spinner h-12 w-12 border-4 border-indigo-500"},null,-1)]))):(i(),c("div",Re,[t("div",qe,[t("canvas",{ref_key:"chartCanvas",ref:d},null,512)]),t("div",Ie,[t("div",Be,[e[6]||(e[6]=t("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"总成本",-1)),t("div",Le," $"+r(g.value.totalCost.toFixed(6)),1)]),t("div",Ee,[e[7]||(e[7]=t("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"平均成本",-1)),t("div",je," $"+r(g.value.avgCost.toFixed(6)),1)]),t("div",Ne,[e[8]||(e[8]=t("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"最高成本",-1)),t("div",Ke," $"+r(g.value.maxCost.toFixed(6)),1)]),t("div",Oe,[e[9]||(e[9]=t("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"增长率",-1)),t("div",{class:D(["mt-1 text-xl font-bold",g.value.growthRate>=0?"text-red-600":"text-green-600"])},r(g.value.growthRate>=0?"+":"")+r(g.value.growthRate.toFixed(1))+"% ",3)])])]))])]))}},j="/admin",N={async getAccountCostProfile(P){return(await F.get(`${j}/accounts/${P}/cost-profile`)).data},async updateCostProfile(P,v){return(await F.put(`${j}/accounts/${P}/cost-profile`,v)).data},async createBill(P,v){return(await F.post(`${j}/accounts/${P}/bills`,v)).data},async listBills(P,v={}){return(await F.get(`${j}/accounts/${P}/bills`,{params:{limit:v.limit||20,offset:v.offset||0}})).data},async inferPricing(P){return(await F.post(`${j}/accounts/${P}/infer-pricing`)).data},async validateCosts(P,v){return(await F.post(`${j}/accounts/${P}/validate-costs`,{billingPeriod:v})).data},async getCostComparison(P,v,b){return(await F.get(`${j}/accounts/${P}/cost-comparison`,{params:{startDate:v,endDate:b}})).data},async importBillsCSV(P,v){return(await F.post(`${j}/accounts/${P}/bills/import`,v,{headers:{"Content-Type":"multipart/form-data"}})).data}},ze={class:"modal-content"},Ge={class:"modal-header"},He={class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},Qe={class:"modal-body"},We={class:"mb-6"},Xe={class:"mb-6"},Ze={key:0,class:"config-section"},Je={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},ts={key:1,class:"config-section"},es={class:"grid grid-cols-1 gap-4 md:grid-cols-3"},ss=["onUpdate:modelValue"],as=["onUpdate:modelValue"],os=["onUpdate:modelValue"],ls=["onClick"],rs={key:2,class:"config-section"},ns={class:"mb-4"},is={class:"mb-4"},ds={class:"mb-4"},us={key:3,class:"config-section"},cs={class:"mb-4"},gs={class:"config-section"},ps={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},xs={class:"mb-6"},ys={class:"modal-footer"},ms=["disabled"],vs={__name:"CostProfileModal",props:{account:{type:Object,required:!0}},emits:["close","saved"],setup(P,{emit:v}){const b=P,C=v,d=_(!1),a=et({billingType:"standard",confidenceLevel:"low",pointConversion:{pointsPerRequest:1,pointsPerToken:.001,costPerPoint:.01},tieredPricing:[{minTokens:0,maxTokens:1e6,costPerMillion:3}],pricingFormula:{baseTokenCost:3e-6,perRequestFee:.002,weight:.5},relativeEfficiency:1,fixedCosts:{monthly_base:0,api_access_fee:0},notes:""});async function k(){if(!b.account.costProfile)return;const m=b.account.costProfile;a.billingType=m.billingType||"standard",a.confidenceLevel=m.confidenceLevel||"low",a.notes=m.notes||"",m.pointConversion&&(a.pointConversion={...m.pointConversion}),m.tieredPricing&&m.tieredPricing.length>0&&(a.tieredPricing=[...m.tieredPricing]),m.pricingFormula&&(a.pricingFormula={...m.pricingFormula}),m.relativeEfficiency&&(a.relativeEfficiency=m.relativeEfficiency),m.fixedCosts&&(a.fixedCosts={...m.fixedCosts})}function y(){a.tieredPricing.push({minTokens:0,maxTokens:1e6,costPerMillion:3})}function g(m){a.tieredPricing.splice(m,1)}async function T(){var m,s;d.value=!0;try{await N.updateCostProfile(b.account.id,a),C("saved")}catch(e){alert(`保存失败: ${((s=(m=e.response)==null?void 0:m.data)==null?void 0:s.error)||e.message}`)}finally{d.value=!1}}return K(()=>{k()}),(m,s)=>(i(),c("div",{class:"modal-overlay",onClick:s[14]||(s[14]=G(e=>m.$emit("close"),["self"]))},[t("div",ze,[t("div",Ge,[t("h3",He," 成本配置 - "+r(P.account.name),1),t("button",{class:"close-btn",onClick:s[0]||(s[0]=e=>m.$emit("close"))},s[15]||(s[15]=[t("i",{class:"fas fa-times"},null,-1)]))]),t("div",Qe,[t("form",{onSubmit:G(T,["prevent"])},[t("div",We,[s[17]||(s[17]=t("label",{class:"form-label"},"计价模式",-1)),w(t("select",{"onUpdate:modelValue":s[1]||(s[1]=e=>a.billingType=e),class:"form-input"},s[16]||(s[16]=[z('<option value="standard" data-v-1a99438c>标准定价（使用公开价格表）</option><option value="point_based" data-v-1a99438c>积分制计费</option><option value="tiered" data-v-1a99438c>阶梯定价</option><option value="hybrid" data-v-1a99438c>混合计费</option><option value="estimated" data-v-1a99438c>估算模式</option>',5)]),512),[[B,a.billingType]]),s[18]||(s[18]=t("p",{class:"form-hint"},"选择账户的计费方式",-1))]),t("div",Xe,[s[20]||(s[20]=t("label",{class:"form-label"},"置信度级别",-1)),w(t("select",{"onUpdate:modelValue":s[2]||(s[2]=e=>a.confidenceLevel=e),class:"form-input"},s[19]||(s[19]=[z('<option value="high" data-v-1a99438c>高 - 已验证准确</option><option value="medium-high" data-v-1a99438c>较高 - 多次验证</option><option value="medium" data-v-1a99438c>中等 - 部分验证</option><option value="low-medium" data-v-1a99438c>较低 - 少量验证</option><option value="low" data-v-1a99438c>低 - 未验证</option>',5)]),512),[[B,a.confidenceLevel]]),s[21]||(s[21]=t("p",{class:"form-hint"},"指示成本计算的可信程度",-1))]),a.billingType==="point_based"?(i(),c("div",Ze,[s[25]||(s[25]=t("h4",{class:"section-title"},"积分换算配置",-1)),t("div",Je,[t("div",null,[s[22]||(s[22]=t("label",{class:"form-label"},"每请求积分",-1)),w(t("input",{"onUpdate:modelValue":s[3]||(s[3]=e=>a.pointConversion.pointsPerRequest=e),class:"form-input",placeholder:"1",step:"0.001",type:"number"},null,512),[[A,a.pointConversion.pointsPerRequest,void 0,{number:!0}]])]),t("div",null,[s[23]||(s[23]=t("label",{class:"form-label"},"每Token积分",-1)),w(t("input",{"onUpdate:modelValue":s[4]||(s[4]=e=>a.pointConversion.pointsPerToken=e),class:"form-input",placeholder:"0.001",step:"0.00001",type:"number"},null,512),[[A,a.pointConversion.pointsPerToken,void 0,{number:!0}]])]),t("div",null,[s[24]||(s[24]=t("label",{class:"form-label"},"每积分成本 ($)",-1)),w(t("input",{"onUpdate:modelValue":s[5]||(s[5]=e=>a.pointConversion.costPerPoint=e),class:"form-input",placeholder:"0.01",step:"0.0001",type:"number"},null,512),[[A,a.pointConversion.costPerPoint,void 0,{number:!0}]])])])])):U("",!0),a.billingType==="tiered"?(i(),c("div",ts,[s[31]||(s[31]=t("h4",{class:"section-title"},"阶梯定价配置",-1)),(i(!0),c(I,null,L(a.tieredPricing,(e,p)=>(i(),c("div",{key:p,class:"tier-item"},[t("div",es,[t("div",null,[s[26]||(s[26]=t("label",{class:"form-label"},"最小Token",-1)),w(t("input",{"onUpdate:modelValue":V=>e.minTokens=V,class:"form-input",placeholder:"0",type:"number"},null,8,ss),[[A,e.minTokens,void 0,{number:!0}]])]),t("div",null,[s[27]||(s[27]=t("label",{class:"form-label"},"最大Token",-1)),w(t("input",{"onUpdate:modelValue":V=>e.maxTokens=V,class:"form-input",placeholder:"1000000",type:"number"},null,8,as),[[A,e.maxTokens,void 0,{number:!0}]])]),t("div",null,[s[28]||(s[28]=t("label",{class:"form-label"},"成本/百万Token ($)",-1)),w(t("input",{"onUpdate:modelValue":V=>e.costPerMillion=V,class:"form-input",placeholder:"3.0",step:"0.01",type:"number"},null,8,os),[[A,e.costPerMillion,void 0,{number:!0}]])])]),a.tieredPricing.length>1?(i(),c("button",{key:0,class:"btn-sm btn-danger mt-2",type:"button",onClick:V=>g(p)},s[29]||(s[29]=[t("i",{class:"fas fa-trash"},null,-1),q(" 删除 ",-1)]),8,ls)):U("",!0)]))),128)),t("button",{class:"btn-secondary mt-2",type:"button",onClick:y},s[30]||(s[30]=[t("i",{class:"fas fa-plus"},null,-1),q(" 添加阶梯 ",-1)]))])):U("",!0),a.billingType==="hybrid"?(i(),c("div",rs,[s[36]||(s[36]=t("h4",{class:"section-title"},"混合计费公式",-1)),t("div",ns,[s[32]||(s[32]=t("label",{class:"form-label"},"基础Token成本 ($)",-1)),w(t("input",{"onUpdate:modelValue":s[6]||(s[6]=e=>a.pricingFormula.baseTokenCost=e),class:"form-input",placeholder:"0.000003",step:"0.000001",type:"number"},null,512),[[A,a.pricingFormula.baseTokenCost,void 0,{number:!0}]])]),t("div",is,[s[33]||(s[33]=t("label",{class:"form-label"},"每请求固定费用 ($)",-1)),w(t("input",{"onUpdate:modelValue":s[7]||(s[7]=e=>a.pricingFormula.perRequestFee=e),class:"form-input",placeholder:"0.002",step:"0.0001",type:"number"},null,512),[[A,a.pricingFormula.perRequestFee,void 0,{number:!0}]])]),t("div",ds,[s[34]||(s[34]=t("label",{class:"form-label"},"权重系数",-1)),w(t("input",{"onUpdate:modelValue":s[8]||(s[8]=e=>a.pricingFormula.weight=e),class:"form-input",max:"1",min:"0",placeholder:"0.5",step:"0.1",type:"number"},null,512),[[A,a.pricingFormula.weight,void 0,{number:!0}]]),s[35]||(s[35]=t("p",{class:"form-hint"},"0-1之间，表示Token成本和请求费用的混合比例",-1))])])):U("",!0),a.billingType==="estimated"?(i(),c("div",us,[s[39]||(s[39]=t("h4",{class:"section-title"},"估算参数",-1)),t("div",cs,[s[37]||(s[37]=t("label",{class:"form-label"},"相对效率系数",-1)),w(t("input",{"onUpdate:modelValue":s[9]||(s[9]=e=>a.relativeEfficiency=e),class:"form-input",placeholder:"1.0",step:"0.1",type:"number"},null,512),[[A,a.relativeEfficiency,void 0,{number:!0}]]),s[38]||(s[38]=t("p",{class:"form-hint"},"相对于标准价格的倍数（如0.8表示比标准便宜20%）",-1))])])):U("",!0),t("div",gs,[s[42]||(s[42]=t("h4",{class:"section-title"},"固定费用（可选）",-1)),t("div",ps,[t("div",null,[s[40]||(s[40]=t("label",{class:"form-label"},"月度基础费用 ($)",-1)),w(t("input",{"onUpdate:modelValue":s[10]||(s[10]=e=>a.fixedCosts.monthly_base=e),class:"form-input",placeholder:"0",step:"0.01",type:"number"},null,512),[[A,a.fixedCosts.monthly_base,void 0,{number:!0}]])]),t("div",null,[s[41]||(s[41]=t("label",{class:"form-label"},"API访问费 ($)",-1)),w(t("input",{"onUpdate:modelValue":s[11]||(s[11]=e=>a.fixedCosts.api_access_fee=e),class:"form-input",placeholder:"0",step:"0.01",type:"number"},null,512),[[A,a.fixedCosts.api_access_fee,void 0,{number:!0}]])])])]),t("div",xs,[s[43]||(s[43]=t("label",{class:"form-label"},"备注说明",-1)),w(t("textarea",{"onUpdate:modelValue":s[12]||(s[12]=e=>a.notes=e),class:"form-input",placeholder:"记录配置来源或特殊说明",rows:"3"},null,512),[[A,a.notes]])])],32)]),t("div",ys,[t("button",{class:"btn-secondary",type:"button",onClick:s[13]||(s[13]=e=>m.$emit("close"))},"取消"),t("button",{class:"btn-primary",disabled:d.value,type:"button",onClick:T},[t("i",{class:D(["fas fa-save",{"fa-spin":d.value}])},null,2),q(" "+r(d.value?"保存中...":"保存配置"),1)],8,ms)])])]))}},fs=H(vs,[["__scopeId","data-v-1a99438c"]]),bs={class:"modal-content"},ks={class:"modal-header"},$s={class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},hs={class:"modal-body"},_s={key:0,class:"space-y-6"},Cs={class:"mb-4"},ws={class:"mb-4"},Ps={class:"mb-4"},Ss={class:"mb-4"},Ts={class:"mb-4"},Fs={class:"text-center"},Vs={key:1,class:"space-y-6"},As={key:0,class:"overflow-x-auto"},Us={class:"min-w-full text-xs"},Ds={class:"divide-y divide-gray-200 dark:divide-gray-700"},Ms={class:"px-2 py-1"},Rs={class:"px-2 py-1 text-right"},qs={class:"px-2 py-1"},Is={class:"px-2 py-1 text-gray-600 dark:text-gray-400"},Bs={class:"mt-2 text-xs text-gray-500"},Ls={class:"text-center"},Es={class:"modal-footer"},js=["disabled"],Ns={__name:"BillEntryModal",props:{account:{type:Object,required:!0}},emits:["close","saved"],setup(P,{emit:v}){const b=P,C=v,d=_(!1),a=_(!1),k=_([]),y=et({billingPeriod:"",totalCost:null,currency:"USD",notes:"",attachment:null});function g(s){const e=s.target.files[0];e&&(y.attachment=e)}function T(s){const e=s.target.files[0];if(!e)return;const p=new FileReader;p.onload=V=>{try{const h=V.target.result.split(`
`).filter(l=>l.trim()),o=h[0].split(",").map(l=>l.trim());k.value=h.slice(1).map(l=>{const u=l.split(",").map(R=>R.trim()),$={};return o.forEach((R,x)=>{$[R]=u[x]||""}),$})}catch(M){alert("CSV 解析失败: "+M.message)}},p.readAsText(e)}async function m(){var s,e;d.value=!0;try{if(a.value){for(const p of k.value)await N.createBill(b.account.id,{billingPeriod:p.billingPeriod,totalCost:parseFloat(p.totalCost),currency:p.currency||"USD",notes:p.notes||""});alert(`成功录入 ${k.value.length} 条账单`)}else await N.createBill(b.account.id,{billingPeriod:y.billingPeriod,totalCost:y.totalCost,currency:y.currency,notes:y.notes}),alert("账单录入成功");C("saved"),C("close")}catch(p){alert(`录入失败: ${((e=(s=p.response)==null?void 0:s.data)==null?void 0:e.error)||p.message}`)}finally{d.value=!1}}return(s,e)=>(i(),c("div",{class:"modal-overlay",onClick:e[8]||(e[8]=G(p=>s.$emit("close"),["self"]))},[t("div",bs,[t("div",ks,[t("h3",$s," 录入账单 - "+r(P.account.name),1),t("button",{class:"close-btn",onClick:e[0]||(e[0]=p=>s.$emit("close"))},e[9]||(e[9]=[t("i",{class:"fas fa-times"},null,-1)]))]),t("div",hs,[a.value?(i(),c("div",Vs,[e[24]||(e[24]=z('<div class="rounded-lg bg-blue-50 p-4 dark:bg-blue-900/20" data-v-93b9649c><h4 class="mb-2 text-sm font-semibold text-blue-900 dark:text-blue-300" data-v-93b9649c><i class="fas fa-info-circle" data-v-93b9649c></i> CSV 格式说明 </h4><p class="mb-2 text-xs text-blue-800 dark:text-blue-400" data-v-93b9649c> CSV 文件应包含以下列（第一行为表头）： </p><code class="block rounded bg-white p-2 text-xs dark:bg-gray-800 dark:text-gray-300" data-v-93b9649c> billingPeriod,totalCost,currency,notes<br data-v-93b9649c> 2025-01,123.45,USD,一月账单<br data-v-93b9649c> 2025-02,145.67,USD,二月账单 </code></div>',1)),t("div",null,[e[20]||(e[20]=t("label",{class:"form-label"},"选择 CSV 文件",-1)),t("input",{accept:".csv",class:"form-input",type:"file",onChange:T},null,32)]),k.value.length>0?(i(),c("div",As,[e[22]||(e[22]=t("h4",{class:"mb-2 text-sm font-semibold text-gray-900 dark:text-gray-100"}," 预览（前5条） ",-1)),t("table",Us,[e[21]||(e[21]=t("thead",{class:"bg-gray-50 dark:bg-gray-800"},[t("tr",null,[t("th",{class:"px-2 py-1 text-left"},"计费周期"),t("th",{class:"px-2 py-1 text-right"},"金额"),t("th",{class:"px-2 py-1 text-left"},"币种"),t("th",{class:"px-2 py-1 text-left"},"备注")])],-1)),t("tbody",Ds,[(i(!0),c(I,null,L(k.value.slice(0,5),(p,V)=>(i(),c("tr",{key:V},[t("td",Ms,r(p.billingPeriod),1),t("td",Rs,"$"+r(p.totalCost),1),t("td",qs,r(p.currency),1),t("td",Is,r(p.notes||"-"),1)]))),128))])]),t("p",Bs,"共 "+r(k.value.length)+" 条记录",1)])):U("",!0),t("div",Ls,[t("button",{class:"text-sm text-indigo-600 hover:text-indigo-700 dark:text-indigo-400",type:"button",onClick:e[6]||(e[6]=p=>a.value=!1)},e[23]||(e[23]=[t("i",{class:"fas fa-arrow-left"},null,-1),q(" 返回单个录入 ",-1)]))])])):(i(),c("div",_s,[t("form",{onSubmit:G(m,["prevent"])},[t("div",Cs,[e[10]||(e[10]=t("label",{class:"form-label"},"计费周期",-1)),w(t("input",{"onUpdate:modelValue":e[1]||(e[1]=p=>y.billingPeriod=p),class:"form-input",placeholder:"2025-01",required:"",type:"month"},null,512),[[A,y.billingPeriod]]),e[11]||(e[11]=t("p",{class:"form-hint"},"格式：YYYY-MM（如 2025-01）",-1))]),t("div",ws,[e[12]||(e[12]=t("label",{class:"form-label"},"实际账单金额 ($)",-1)),w(t("input",{"onUpdate:modelValue":e[2]||(e[2]=p=>y.totalCost=p),class:"form-input",placeholder:"123.45",required:"",step:"0.01",type:"number"},null,512),[[A,y.totalCost,void 0,{number:!0}]]),e[13]||(e[13]=t("p",{class:"form-hint"},"从账单中获取的实际费用",-1))]),t("div",Ps,[e[15]||(e[15]=t("label",{class:"form-label"},"币种",-1)),w(t("select",{"onUpdate:modelValue":e[3]||(e[3]=p=>y.currency=p),class:"form-input"},e[14]||(e[14]=[t("option",{value:"USD"},"美元 (USD)",-1),t("option",{value:"CNY"},"人民币 (CNY)",-1),t("option",{value:"EUR"},"欧元 (EUR)",-1)]),512),[[B,y.currency]])]),t("div",Ss,[e[16]||(e[16]=t("label",{class:"form-label"},"账单备注",-1)),w(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=p=>y.notes=p),class:"form-input",placeholder:"记录账单来源、特殊情况等",rows:"3"},null,512),[[A,y.notes]])]),t("div",Ts,[e[17]||(e[17]=t("label",{class:"form-label"},"账单文件（可选）",-1)),t("input",{accept:".pdf,.png,.jpg,.jpeg",class:"form-input",type:"file",onChange:g},null,32),e[18]||(e[18]=t("p",{class:"form-hint"},"支持PDF、图片格式",-1))])],32),t("div",Fs,[t("button",{class:"text-sm text-indigo-600 hover:text-indigo-700 dark:text-indigo-400",type:"button",onClick:e[5]||(e[5]=p=>a.value=!0)},e[19]||(e[19]=[t("i",{class:"fas fa-upload"},null,-1),q(" 切换到批量导入 ",-1)]))])]))]),t("div",Es,[t("button",{class:"btn-secondary",type:"button",onClick:e[7]||(e[7]=p=>s.$emit("close"))},"取消"),t("button",{class:"btn-primary",disabled:d.value||a.value&&k.value.length===0,type:"button",onClick:m},[t("i",{class:D(["fas fa-save",{"fa-spin":d.value}])},null,2),q(" "+r(d.value?"提交中...":a.value?`批量提交 (${k.value.length})`:"提交账单"),1)],8,js)])])]))}},Ks=H(Ns,[["__scopeId","data-v-93b9649c"]]),Os={class:"modal-content-large"},Ys={class:"modal-header"},zs={class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},Gs={class:"modal-body"},Hs={class:"mb-6"},Qs={class:"flex gap-3"},Ws=["disabled"],Xs={key:0,class:"space-y-6"},Zs={class:"grid grid-cols-1 gap-4 md:grid-cols-3"},Js={class:"stat-card"},ta={class:"stat-value text-blue-600 dark:text-blue-400"},ea={class:"stat-card"},sa={class:"stat-value text-green-600 dark:text-green-400"},aa={class:"stat-card"},oa={class:"stat-hint"},la={key:0,class:"quality-section"},ra={class:"grid grid-cols-1 gap-4 md:grid-cols-3"},na={class:"quality-metric"},ia={class:"flex items-center justify-between"},da={class:"text-sm font-bold text-gray-900 dark:text-gray-100"},ua={class:"progress-bar mt-2"},ca={class:"quality-metric"},ga={class:"flex items-center justify-between"},pa={class:"text-sm font-bold text-gray-900 dark:text-gray-100"},xa={class:"progress-bar mt-2"},ya={class:"quality-metric"},ma={class:"flex items-center justify-between"},va={class:"text-sm font-bold text-gray-900 dark:text-gray-100"},fa={class:"progress-bar mt-2"},ba={class:"details-section"},ka={class:"grid grid-cols-1 gap-3 text-sm md:grid-cols-2"},$a={class:"detail-item"},ha={class:"detail-value"},_a={class:"detail-item"},Ca={class:"detail-value"},wa={class:"detail-item"},Pa={class:"detail-value"},Sa={class:"detail-item"},Ta={key:1,class:"comparison-section"},Fa={class:"mb-4 flex items-center justify-between"},Va={key:2,class:"suggestions-section"},Aa={class:"space-y-2"},Ua={key:1,class:"empty-state"},Da={class:"modal-footer"},Ma={__name:"InferenceValidationPanel",props:{account:{type:Object,required:!0}},emits:["close"],setup(P){const v=P,b=_(!1),C=_(""),d=_(null),a=_(null),k=_(!1),y=_(null);let g=null;async function T(){var h,o;if(!C.value){alert("请选择验证周期");return}b.value=!0;try{const l=await N.validateCosts(v.account.id,C.value);if(console.log("Validation result:",l),!l){alert("验证失败：未收到服务器响应");return}if(l.validated===!1&&l.reason==="database_disabled"){alert(`成本验证功能需要 PostgreSQL 数据库支持。

请在环境变量中设置 POSTGRES_ENABLED=true 并配置数据库连接参数后重启服务。`);return}if(l.validated===!1&&l.reason==="no_bill_data"){alert(l.message||`未找到 ${C.value} 的账单数据。

请先录入该周期的账单数据。`);return}d.value=l,e(),await m()}catch(l){console.error("Validation error:",l),alert(`验证失败: ${((o=(h=l.response)==null?void 0:h.data)==null?void 0:o.error)||l.message}`)}finally{b.value=!1}}async function m(){k.value=!0;try{const h=new Date(C.value+"-01"),o=new Date(h);o.setMonth(o.getMonth()-5);const l=await N.getCostComparison(v.account.id,o.toISOString().slice(0,10),h.toISOString().slice(0,10));a.value=l,await lt(),s()}catch(h){console.error("Failed to load comparison:",h)}finally{k.value=!1}}function s(){if(!y.value||!a.value)return;g&&g.dispose(),g=it(y.value);const h={tooltip:{trigger:"axis",backgroundColor:"rgba(0, 0, 0, 0.8)",textStyle:{color:"#fff"}},legend:{data:["计算成本","实际账单"],textStyle:{color:document.documentElement.classList.contains("dark")?"#9CA3AF":"#4B5563"}},xAxis:{type:"category",data:a.value.periods||[],axisLabel:{color:document.documentElement.classList.contains("dark")?"#9CA3AF":"#6B7280"}},yAxis:{type:"value",name:"成本 ($)",axisLabel:{color:document.documentElement.classList.contains("dark")?"#9CA3AF":"#6B7280"}},series:[{name:"计算成本",type:"line",data:a.value.calculatedCosts||[],smooth:!0,itemStyle:{color:"#3B82F6"}},{name:"实际账单",type:"line",data:a.value.actualBills||[],smooth:!0,itemStyle:{color:"#10B981"}}]};g.setOption(h)}function e(){var l;if(!d.value)return;const h=[],o=Math.abs(d.value.deviationPercent||0);o>20?h.push("偏差较大，建议重新推导计价参数或检查账单数据准确性"):o>10?h.push("偏差适中，可考虑录入更多账单数据以提高推导精度"):o<5&&h.push("计算精度优秀，当前配置可靠"),((l=d.value.quality)==null?void 0:l.r_squared)<.8&&h.push("R²系数较低，推导模型可能不够准确，建议手动调整参数"),d.value.suggestions=h}function p(h){const o=Math.abs(h||0);return o<5?"text-green-600 dark:text-green-400":o<10?"text-yellow-600 dark:text-yellow-400":o<20?"text-orange-600 dark:text-orange-400":"text-red-600 dark:text-red-400"}function V(h){return{high:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300","medium-high":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",medium:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300","low-medium":"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300",low:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"}[h]||"bg-gray-100 text-gray-800"}function M(h){return{high:"高","medium-high":"较高",medium:"中等","low-medium":"较低",low:"低"}[h]||h}return K(()=>{const h=new Date;C.value=`${h.getFullYear()}-${String(h.getMonth()+1).padStart(2,"0")}`}),(h,o)=>{var l,u;return i(),c("div",{class:"modal-overlay",onClick:o[3]||(o[3]=G($=>h.$emit("close"),["self"]))},[t("div",Os,[t("div",Ys,[t("h3",zs," 成本验证 - "+r(P.account.name),1),t("button",{class:"close-btn",onClick:o[0]||(o[0]=$=>h.$emit("close"))},o[4]||(o[4]=[t("i",{class:"fas fa-times"},null,-1)]))]),t("div",Gs,[t("div",Hs,[o[5]||(o[5]=t("label",{class:"form-label"},"选择验证周期",-1)),t("div",Qs,[w(t("input",{"onUpdate:modelValue":o[1]||(o[1]=$=>C.value=$),class:"form-input flex-1",placeholder:"2025-01",type:"month"},null,512),[[A,C.value]]),t("button",{class:"btn-primary",disabled:b.value,onClick:T},[t("i",{class:D(["fas fa-play",{"fa-spin":b.value}])},null,2),q(" "+r(b.value?"验证中...":"开始验证"),1)],8,Ws)])]),d.value?(i(),c("div",Xs,[t("div",Zs,[t("div",Js,[o[6]||(o[6]=t("div",{class:"stat-label"},"计算成本",-1)),t("div",ta," $"+r(((l=d.value.calculatedCost)==null?void 0:l.toFixed(4))||"0.0000"),1),o[7]||(o[7]=t("div",{class:"stat-hint"},"基于使用量计算",-1))]),t("div",ea,[o[8]||(o[8]=t("div",{class:"stat-label"},"实际账单",-1)),t("div",sa," $"+r(((u=d.value.actualBill)==null?void 0:u.toFixed(4))||"0.0000"),1),o[9]||(o[9]=t("div",{class:"stat-hint"},"从账单记录获取",-1))]),t("div",aa,[o[10]||(o[10]=t("div",{class:"stat-label"},"偏差率",-1)),t("div",{class:D(["stat-value",p(d.value.deviationPercent)])},r(Math.abs(d.value.deviationPercent||0).toFixed(2))+"% ",3),t("div",oa,r(d.value.deviationPercent>0?"高估":"低估"),1)])]),d.value.quality?(i(),c("div",la,[o[14]||(o[14]=t("h4",{class:"mb-4 text-sm font-semibold text-gray-900 dark:text-gray-100"}," 推导质量评分 ",-1)),t("div",ra,[t("div",na,[t("div",ia,[o[11]||(o[11]=t("span",{class:"text-xs text-gray-600 dark:text-gray-400"},"总分",-1)),t("span",da,r((d.value.quality.score*100).toFixed(1))+"% ",1)]),t("div",ua,[t("div",{class:"progress-fill bg-green-500",style:Z({width:d.value.quality.score*100+"%"})},null,4)])]),t("div",ca,[t("div",ga,[o[12]||(o[12]=t("span",{class:"text-xs text-gray-600 dark:text-gray-400"},"R² 决定系数",-1)),t("span",pa,r((d.value.quality.r_squared*100).toFixed(1))+"% ",1)]),t("div",xa,[t("div",{class:"progress-fill bg-blue-500",style:Z({width:d.value.quality.r_squared*100+"%"})},null,4)])]),t("div",ya,[t("div",ma,[o[13]||(o[13]=t("span",{class:"text-xs text-gray-600 dark:text-gray-400"},"平均绝对误差",-1)),t("span",va,r((d.value.quality.mean_absolute_error*100).toFixed(2))+"% ",1)]),t("div",fa,[t("div",{class:"progress-fill bg-yellow-500",style:Z({width:(1-d.value.quality.mean_absolute_error)*100+"%"})},null,4)])])])])):U("",!0),t("div",ba,[o[19]||(o[19]=t("h4",{class:"mb-3 text-sm font-semibold text-gray-900 dark:text-gray-100"},"验证详情",-1)),t("div",ka,[t("div",$a,[o[15]||(o[15]=t("span",{class:"detail-label"},"计费周期:",-1)),t("span",ha,r(d.value.billingPeriod),1)]),t("div",_a,[o[16]||(o[16]=t("span",{class:"detail-label"},"计算方法:",-1)),t("span",Ca,r(d.value.calculationMethod),1)]),t("div",wa,[o[17]||(o[17]=t("span",{class:"detail-label"},"数据来源:",-1)),t("span",Pa,r(d.value.costSource),1)]),t("div",Sa,[o[18]||(o[18]=t("span",{class:"detail-label"},"置信度:",-1)),t("span",{class:D(["inline-flex rounded-full px-2 py-0.5 text-xs font-semibold",V(d.value.confidenceLevel)])},r(M(d.value.confidenceLevel)),3)])])]),a.value?(i(),c("div",Ta,[t("div",Fa,[o[21]||(o[21]=t("h4",{class:"text-sm font-semibold text-gray-900 dark:text-gray-100"},"成本对比趋势",-1)),t("button",{class:"btn-sm btn-secondary",onClick:m},[t("i",{class:D(["fas fa-sync-alt",{"fa-spin":k.value}])},null,2),o[20]||(o[20]=q(" 刷新 ",-1))])]),t("div",{ref_key:"chartContainer",ref:y,class:"chart-container"},null,512)])):U("",!0),d.value.suggestions?(i(),c("div",Va,[o[23]||(o[23]=t("h4",{class:"mb-3 text-sm font-semibold text-gray-900 dark:text-gray-100"},[t("i",{class:"fas fa-lightbulb text-yellow-500"}),q(" 优化建议 ")],-1)),t("ul",Aa,[(i(!0),c(I,null,L(d.value.suggestions,($,R)=>(i(),c("li",{key:R,class:"flex items-start gap-2 text-sm text-gray-600 dark:text-gray-400"},[o[22]||(o[22]=t("i",{class:"fas fa-check-circle mt-0.5 text-green-500"},null,-1)),t("span",null,r($),1)]))),128))])])):U("",!0)])):(i(),c("div",Ua,o[24]||(o[24]=[t("i",{class:"fas fa-chart-line mb-3 text-4xl text-gray-300 dark:text-gray-600"},null,-1),t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},' 选择计费周期并点击"开始验证"以查看结果 ',-1)])))]),t("div",Da,[t("button",{class:"btn-secondary",type:"button",onClick:o[2]||(o[2]=$=>h.$emit("close"))},"关闭")])])])}}},Ra=H(Ma,[["__scopeId","data-v-55a1ec88"]]),qa={class:"cost-tracking-management"},Ia={class:"card p-6"},Ba={class:"mb-6 flex items-center justify-between"},La={class:"flex gap-3"},Ea=["disabled"],ja={key:0,class:"flex h-64 items-center justify-center"},Na={key:1,class:"overflow-x-auto"},Ka={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Oa={class:"divide-y divide-gray-200 bg-white dark:divide-gray-700 dark:bg-gray-900"},Ya={class:"px-4 py-3"},za={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},Ga={class:"text-xs text-gray-500 dark:text-gray-400"},Ha={class:"px-4 py-3"},Qa={class:"px-4 py-3"},Wa={class:"text-sm text-gray-900 dark:text-gray-100"},Xa={class:"px-4 py-3"},Za={key:1,class:"text-xs text-gray-400"},Ja={class:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400"},to={class:"px-4 py-3 text-right"},eo={class:"flex justify-end gap-2"},so=["onClick"],ao=["onClick"],oo=["disabled","onClick"],lo=["onClick"],ro={key:0,class:"py-12 text-center"},no={__name:"CostTrackingManagement",setup(P){const v=_(!1),b=_([]),C=_({platform:"all"}),d=_(null),a=_(!1),k=_(!1),y=_(!1),g=_(null),T=W(()=>C.value.platform==="all"?b.value:b.value.filter(x=>x.platform===C.value.platform));async function m(){v.value=!0;try{let x=[];try{const n=await F.get("/admin/claude-accounts");n.success&&n.data&&x.push(...n.data.map(S=>({...S,platform:S.platform||"claude"})))}catch(n){console.warn("Failed to load Claude accounts:",n.message)}try{const n=await F.get("/admin/claude-console-accounts");n.success&&n.data&&x.push(...n.data.map(S=>({...S,platform:S.platform||"claude-console"})))}catch(n){console.warn("Failed to load Claude Console accounts:",n.message)}try{const n=await F.get("/admin/gemini-accounts");n.success&&n.data&&x.push(...n.data.map(S=>({...S,platform:S.platform||"gemini"})))}catch(n){console.warn("Failed to load Gemini accounts:",n.message)}try{const n=await F.get("/admin/openai-accounts");n.success&&n.data&&x.push(...n.data.map(S=>({...S,platform:S.platform||"openai"})))}catch(n){console.warn("Failed to load OpenAI accounts:",n.message)}try{const n=await F.get("/admin/openai-responses-accounts");n.success&&n.data&&x.push(...n.data.map(S=>({...S,platform:S.platform||"openai-responses"})))}catch(n){console.warn("Failed to load OpenAI Responses accounts:",n.message)}if(console.log("All accounts:",x),x.length===0){b.value=[],v.value=!1;return}const f=await Promise.all(x.map(async n=>{try{const S=await N.getAccountCostProfile(n.id);return{...n,costProfile:(S==null?void 0:S.profile)||null}}catch(S){return console.log(`No cost profile for account ${n.id}:`,S.message),{...n,costProfile:null}}}));b.value=f,console.log("Accounts with profiles:",f)}catch(x){console.error("Unexpected error loading accounts:",x)}finally{v.value=!1}}function s(x){d.value=x,a.value=!0}function e(x){d.value=x,k.value=!0}function p(x){d.value=x,y.value=!0}async function V(x){var f,n,S,O;if(confirm(`确定要为账户 "${x.name}" 推导计价参数吗？这将基于历史账单数据进行分析。`)){g.value=x.id;try{const E=await N.inferPricing(x.id);alert(`推导成功！
质量分数: ${(((f=E.quality)==null?void 0:f.score)*100||0).toFixed(1)}%
R²: ${(((n=E.quality)==null?void 0:n.r_squared)*100||0).toFixed(1)}%`),await m()}catch(E){alert(`推导失败: ${((O=(S=E.response)==null?void 0:S.data)==null?void 0:O.error)||E.message}`)}finally{g.value=null}}}function M(){a.value=!1,m()}function h(){k.value=!1}function o(x){return{claude:"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300","claude-console":"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-300",gemini:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",openai:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300"}[x]||"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}function l(x){return{high:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300","medium-high":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",medium:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300","low-medium":"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300",low:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"}[x]||"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}function u(x){return{high:"高","medium-high":"较高",medium:"中等","low-medium":"较低",low:"低"}[x]||x}function $(x){return{standard:"标准定价",point_based:"积分制",tiered:"阶梯定价",hybrid:"混合计费",estimated:"估算模式"}[x]||"未配置"}function R(x){return x?new Date(x).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"}):"-"}return K(()=>{m()}),(x,f)=>(i(),c("div",qa,[t("div",Ia,[t("div",Ba,[f[6]||(f[6]=t("div",null,[t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},"成本配置与验证"),t("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"}," 管理账户计价模式、录入账单、推导参数和验证成本准确性 ")],-1)),t("div",La,[w(t("select",{"onUpdate:modelValue":f[0]||(f[0]=n=>C.value.platform=n),class:"rounded-lg border border-gray-300 px-3 py-2 text-sm dark:border-gray-600 dark:bg-gray-800 dark:text-gray-200",onChange:m},f[4]||(f[4]=[z('<option value="all" data-v-6e67f7b6>全部平台</option><option value="claude" data-v-6e67f7b6>Claude</option><option value="claude-console" data-v-6e67f7b6>Console</option><option value="gemini" data-v-6e67f7b6>Gemini</option><option value="openai" data-v-6e67f7b6>OpenAI</option><option value="openai-responses" data-v-6e67f7b6>OpenAI Responses</option>',6)]),544),[[B,C.value.platform]]),t("button",{class:"btn-primary flex items-center gap-2",disabled:v.value,onClick:m},[t("i",{class:D(["fas fa-sync-alt",{"fa-spin":v.value}])},null,2),f[5]||(f[5]=q(" 刷新 ",-1))],8,Ea)])]),v.value?(i(),c("div",ja,f[7]||(f[7]=[t("div",{class:"loading-spinner h-12 w-12 border-4 border-indigo-500"},null,-1)]))):(i(),c("div",Na,[t("table",Ka,[f[11]||(f[11]=t("thead",{class:"bg-gray-50 dark:bg-gray-800"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase text-gray-500 dark:text-gray-400"}," 账户 "),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase text-gray-500 dark:text-gray-400"}," 平台 "),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase text-gray-500 dark:text-gray-400"}," 计价模式 "),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase text-gray-500 dark:text-gray-400"}," 置信度 "),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase text-gray-500 dark:text-gray-400"}," 最后验证 "),t("th",{class:"px-4 py-3 text-right text-xs font-medium uppercase text-gray-500 dark:text-gray-400"}," 操作 ")])],-1)),t("tbody",Oa,[(i(!0),c(I,null,L(T.value,n=>{var S,O,E;return i(),c("tr",{key:n.id,class:"hover:bg-gray-50 dark:hover:bg-gray-800"},[t("td",Ya,[t("div",za,r(n.name),1),t("div",Ga,r(n.id),1)]),t("td",Ha,[t("span",{class:D(["inline-flex rounded-full px-2 py-1 text-xs font-semibold",o(n.platform)])},r(n.platform),3)]),t("td",Qa,[t("span",Wa,r($((S=n.costProfile)==null?void 0:S.billingType)),1)]),t("td",Xa,[(O=n.costProfile)!=null&&O.confidenceLevel?(i(),c("span",{key:0,class:D(["inline-flex rounded-full px-2 py-1 text-xs font-semibold",l(n.costProfile.confidenceLevel)])},r(u(n.costProfile.confidenceLevel)),3)):(i(),c("span",Za,"-"))]),t("td",Ja,r((E=n.costProfile)!=null&&E.lastValidatedAt?R(n.costProfile.lastValidatedAt):"-"),1),t("td",to,[t("div",eo,[t("button",{class:"btn-sm btn-secondary",title:"配置成本",onClick:X=>s(n)},f[8]||(f[8]=[t("i",{class:"fas fa-cog"},null,-1)]),8,so),t("button",{class:"btn-sm btn-secondary",title:"录入账单",onClick:X=>e(n)},f[9]||(f[9]=[t("i",{class:"fas fa-file-invoice-dollar"},null,-1)]),8,ao),t("button",{class:"btn-sm btn-secondary",disabled:g.value===n.id,title:"推导参数",onClick:X=>V(n)},[t("i",{class:D(["fas fa-robot",{"fa-spin":g.value===n.id}])},null,2)],8,oo),t("button",{class:"btn-sm btn-primary",title:"验证成本",onClick:X=>p(n)},f[10]||(f[10]=[t("i",{class:"fas fa-check-circle"},null,-1)]),8,lo)])])])}),128))])]),T.value.length===0?(i(),c("div",ro,f[12]||(f[12]=[t("i",{class:"fas fa-inbox mb-3 text-4xl text-gray-300 dark:text-gray-600"},null,-1),t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"暂无账户数据",-1)]))):U("",!0)]))]),a.value?(i(),J(fs,{key:0,account:d.value,onClose:f[1]||(f[1]=n=>a.value=!1),onSaved:M},null,8,["account"])):U("",!0),k.value?(i(),J(Ks,{key:1,account:d.value,onClose:f[2]||(f[2]=n=>k.value=!1),onSaved:h},null,8,["account"])):U("",!0),y.value?(i(),J(Ra,{key:2,account:d.value,onClose:f[3]||(f[3]=n=>y.value=!1)},null,8,["account"])):U("",!0)]))}},io=H(no,[["__scopeId","data-v-6e67f7b6"]]),uo={class:"analytics-container"},co={class:"mb-6"},go={class:"border-b border-gray-200 dark:border-gray-700"},po={"aria-label":"Tabs",class:"-mb-px flex space-x-8"},xo=["onClick"],yo={class:"tab-content"},mo={class:"space-y-6"},vo={class:"space-y-6"},fo={class:"space-y-6"},bo={key:0,class:"space-y-6"},ko={__name:"AnalyticsView",setup(P){const v=_("cost-efficiency"),b=[{id:"cost-efficiency",name:"账户性价比对比",icon:"fas fa-chart-line"},{id:"api-key-breakdown",name:"API Key 调用明细",icon:"fas fa-key"},{id:"cost-trends",name:"成本趋势分析",icon:"fas fa-chart-area"},{id:"cost-tracking",name:"成本配置与验证",icon:"fas fa-cog"}];return(C,d)=>(i(),c("div",uo,[d[0]||(d[0]=t("div",{class:"mb-6"},[t("h2",{class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},"统计分析"),t("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"}," 深度分析账户性价比、API Key 使用情况和成本趋势 ")],-1)),t("div",co,[t("div",go,[t("nav",po,[(i(),c(I,null,L(b,a=>t("button",{key:a.id,class:D([v.value===a.id?"border-indigo-500 text-indigo-600 dark:text-indigo-400":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300","group inline-flex items-center border-b-2 px-1 py-4 text-sm font-medium transition-colors"]),onClick:k=>v.value=a.id},[t("i",{class:D([a.icon,"mr-2"])},null,2),q(" "+r(a.name),1)],10,xo)),64))])])]),t("div",yo,[w(t("div",mo,[Q(Dt)],512),[[tt,v.value==="cost-efficiency"]]),w(t("div",vo,[Q(Fe)],512),[[tt,v.value==="api-key-breakdown"]]),w(t("div",fo,[Q(Ye)],512),[[tt,v.value==="cost-trends"]]),v.value==="cost-tracking"?(i(),c("div",bo,[Q(io)])):U("",!0)])]))}},Po=H(ko,[["__scopeId","data-v-df873dca"]]);export{Po as default};
