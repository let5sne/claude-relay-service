import{aP as ft,r as D,c as E,aX as Q,x as l,y as r,z as t,O as h,L as A,P as i,u as e,C as U,K as ut,aq as ct,aa as mt,f as xt,Y as yt,Q as z,ac as H,B as tt,R as Y,q as pt,aW as vt,V as bt,o as _t,I as at,J as gt,av as kt}from"./vue-vendor-Bsazo-x0.js";import{_ as G,a as ht}from"./index-C-gQdH2L.js";import{L as wt}from"./LogoTitle-CxLp9RXy.js";import{T as $t}from"./ThemeToggle-WvN-1x0T.js";import{b as St}from"./vendor-CrxIEVZC.js";import{_ as Ct}from"./WindowCountdown-BTXjZ8Dc.js";import Tt from"./TutorialView-8Fs1WvCG.js";import"./element-plus-DcHmMMW3.js";class Kt{constructor(){this.baseURL=window.location.origin,this.isDev=!1}async request(v,s={}){try{this.isDev&&v.startsWith("/admin")&&(v="/webapi"+v);const f=await fetch(`${this.baseURL}${v}`,{headers:{"Content-Type":"application/json",...s.headers},...s}),x=await f.json();if(!f.ok)throw new Error(x.message||`请求失败: ${f.status}`);return x}catch(f){throw console.error("API Stats request error:",f),f}}async getKeyId(v){return this.request("/apiStats/api/get-key-id",{method:"POST",body:JSON.stringify({apiKey:v})})}async getUserStats(v){return this.request("/apiStats/api/user-stats",{method:"POST",body:JSON.stringify({apiId:v})})}async getUserModelStats(v,s="daily"){return this.request("/apiStats/api/user-model-stats",{method:"POST",body:JSON.stringify({apiId:v,period:s})})}async getOemSettings(){try{return await this.request("/admin/oem-settings")}catch(v){return console.error("Failed to load OEM settings:",v),{success:!0,data:{siteName:"Claude Relay Service",siteIcon:"",siteIconData:""}}}}async getBatchStats(v){return this.request("/apiStats/api/batch-stats",{method:"POST",body:JSON.stringify({apiIds:v})})}async getBatchModelStats(v,s="daily"){return this.request("/apiStats/api/batch-model-stats",{method:"POST",body:JSON.stringify({apiIds:v,period:s})})}}const V=new Kt,X=ft("apistats",()=>{const F=D(""),v=D(null),s=D(!1),f=D(!1),x=D(!0),p=D(""),m=D("daily"),b=D(null),y=D([]),k=D(null),u=D(null),$=D({siteName:"",siteIcon:"",siteIconData:""}),I=D(!1),C=D([]),w=D([]),T=D(null),M=D([]),c=D([]),o=E(()=>{const d={requests:0,inputTokens:0,outputTokens:0,cacheCreateTokens:0,cacheReadTokens:0,allTokens:0,cost:0,formattedCost:"$0.000000"};return I.value&&T.value?m.value==="daily"?T.value.dailyUsage||d:T.value.monthlyUsage||d:m.value==="daily"?k.value||d:u.value||d}),N=E(()=>{if(!b.value||!o.value)return{tokenUsage:0,costUsage:0,requestUsage:0};const d=o.value,_=b.value.limits;return{tokenUsage:_.tokenLimit>0?Math.min(d.allTokens/_.tokenLimit*100,100):0,costUsage:_.dailyCostLimit>0?Math.min(d.cost/_.dailyCostLimit*100,100):0,requestUsage:_.rateLimitRequests>0?Math.min(d.requests/_.rateLimitRequests*100,100):0}});async function W(){if(I.value)return rt();const d=F.value.trim();if(!d){p.value="请输入 API Key";return}if(d.length<10||d.length>512){p.value="API Key 格式无效：长度应在 10-512 个字符之间";return}s.value=!0,p.value="",b.value=null,y.value=[],v.value=null;try{const _=await V.getKeyId(d);if(_.success){v.value=_.data.id;const L=await V.getUserStats(v.value);if(L.success)b.value=L.data,await O(),p.value="",lt();else throw new Error(L.message||"查询失败")}else throw new Error(_.message||"获取 API Key ID 失败")}catch(_){console.error("Query stats error:",_),p.value=_.message||"查询统计数据失败，请检查您的 API Key 是否正确",b.value=null,y.value=[],v.value=null}finally{s.value=!1}}async function O(){v.value&&(await Promise.all([q("daily"),q("monthly")]),await S(m.value))}async function q(d){try{const _=await V.getUserModelStats(v.value,d);if(_.success){const L=_.data||[],j={requests:0,inputTokens:0,outputTokens:0,cacheCreateTokens:0,cacheReadTokens:0,allTokens:0,cost:0,formattedCost:"$0.000000"};L.forEach(P=>{j.requests+=P.requests||0,j.inputTokens+=P.inputTokens||0,j.outputTokens+=P.outputTokens||0,j.cacheCreateTokens+=P.cacheCreateTokens||0,j.cacheReadTokens+=P.cacheReadTokens||0,j.allTokens+=P.allTokens||0}),typeof _.totalCost=="number"?j.cost=_.totalCost:L.forEach(P=>{var B;j.cost+=((B=P.costs)==null?void 0:B.total)||0}),j.formattedCost=ot(j.cost),d==="daily"?k.value=j:u.value=j}else console.warn(`Failed to load ${d} stats:`,_.message)}catch(_){console.error(`Load ${d} stats error:`,_)}}async function S(d="daily"){if(v.value){f.value=!0;try{const _=await V.getUserModelStats(v.value,d);if(_.success)y.value=_.data||[];else throw new Error(_.message||"加载模型统计失败")}catch(_){console.error("Load model stats error:",_),y.value=[]}finally{f.value=!1}}}async function Z(d){if(!(m.value===d||f.value)){if(m.value=d,I.value&&w.value.length>0){await et(d);return}(d==="daily"&&!k.value||d==="monthly"&&!u.value)&&await q(d),await S(d)}}async function J(){var d,_;if(v.value){s.value=!0,p.value="",b.value=null,y.value=[];try{const L=await V.getUserStats(v.value);if(L.success)b.value=L.data,console.log("API Stats - Full response:",L.data),console.log("API Stats - limits data:",L.data.limits),console.log("API Stats - weeklyOpusCostLimit:",(d=L.data.limits)==null?void 0:d.weeklyOpusCostLimit),console.log("API Stats - weeklyOpusCost:",(_=L.data.limits)==null?void 0:_.weeklyOpusCost),await O(),p.value="";else throw new Error(L.message||"查询失败")}catch(L){console.error("Load stats with apiId error:",L),p.value=L.message||"查询统计数据失败",b.value=null,y.value=[]}finally{s.value=!1}}}async function it(){x.value=!0;try{const d=await V.getOemSettings();d&&d.success&&d.data&&($.value={...$.value,...d.data})}catch(d){console.error("Error loading OEM settings:",d),$.value={siteName:"Claude Relay Service",siteIcon:"",siteIconData:""}}finally{x.value=!1}}function ot(d){return typeof d!="number"||d===0?"$0.000000":d>=1?"$"+d.toFixed(2):d>=.01?"$"+d.toFixed(4):"$"+d.toFixed(6)}function lt(){if(v.value){const d=new URL(window.location);d.searchParams.set("apiId",v.value),window.history.pushState({},"",d)}}async function rt(){const d=n();if(d.length===0){p.value="请输入至少一个有效的 API Key";return}s.value=!0,p.value="",T.value=null,M.value=[],c.value=[],y.value=[],C.value=d,w.value=[];try{const _=await Promise.allSettled(d.map(B=>V.getKeyId(B))),L=[],j=[];if(_.forEach((B,st)=>{B.status==="fulfilled"&&B.value.success?(L.push(B.value.data.id),j.push(d[st])):c.value.push(d[st])}),L.length===0)throw new Error("所有 API Key 都无效");w.value=L,C.value=j;const P=await V.getBatchStats(L);if(P.success)T.value=P.data.aggregated,M.value=P.data.individual,b.value=P.data.aggregated,k.value=P.data.aggregated.dailyUsage||null,u.value=P.data.aggregated.monthlyUsage||null,await et(m.value),a();else throw new Error(P.message||"批量查询失败")}catch(_){console.error("Batch query error:",_),p.value=_.message||"批量查询统计数据失败",T.value=null,M.value=[]}finally{s.value=!1}}async function et(d="daily"){if(w.value.length!==0){f.value=!0;try{const _=await V.getBatchModelStats(w.value,d);if(_.success)y.value=_.data||[];else throw new Error(_.message||"加载批量模型统计失败")}catch(_){console.error("Load batch model stats error:",_),y.value=[]}finally{f.value=!1}}}function n(){if(!F.value)return[];const d=F.value.split(/[,\n]+/).map(L=>L.trim()).filter(L=>L.length>=10&&L.length<=512);return[...new Set(d)].slice(0,30)}function a(){if(w.value.length>0){const d=new URL(window.location);d.searchParams.set("apiIds",w.value.join(",")),d.searchParams.set("batch","true"),window.history.pushState({},"",d)}}function g(){F.value=""}function K(){b.value=null,y.value=[],k.value=null,u.value=null,p.value="",m.value="daily",v.value=null,C.value=[],w.value=[],T.value=null,M.value=[],c.value=[]}function R(){F.value="",I.value=!1,K()}return{apiKey:F,apiId:v,loading:s,modelStatsLoading:f,oemLoading:x,error:p,statsPeriod:m,statsData:b,modelStats:y,dailyStats:k,monthlyStats:u,oemSettings:$,multiKeyMode:I,apiKeys:C,apiIds:w,aggregatedStats:T,individualStats:M,invalidKeys:c,currentPeriodData:o,usagePercentages:N,queryStats:W,queryBatchStats:rt,loadAllPeriodStats:O,loadPeriodStats:q,loadModelStats:S,loadBatchModelStats:et,switchPeriod:Z,loadStatsWithApiId:J,loadOemSettings:it,clearData:K,clearInput:g,reset:R}}),Lt={class:"api-input-wide-card mb-8 rounded-3xl p-6 shadow-xl"},At={class:"mx-auto max-w-4xl"},Mt={class:"control-bar mb-4 flex flex-wrap items-center justify-between gap-3"},Pt={class:"text-sm font-medium text-gray-700 dark:text-gray-300"},It={class:"button-group flex items-center gap-2"},qt={class:"mode-switch-group flex items-center rounded-lg bg-gray-100 p-1 dark:bg-gray-800"},Dt={key:0,class:"ml-1 rounded-full bg-white/20 px-1.5 py-0.5 text-xs font-semibold"},Ut={class:"api-input-grid grid grid-cols-1 gap-4 lg:grid-cols-4"},Rt={class:"lg:col-span-3"},Nt=["disabled"],jt={key:1,class:"relative"},Ft=["disabled"],Ot={class:"lg:col-span-1"},Et=["disabled"],Wt={key:0,class:"fas fa-spinner loading-spinner"},Bt={key:1,class:"fas fa-search"},Vt={class:"security-notice mt-4"},zt={key:0,class:"mt-2 rounded-lg bg-blue-50 p-3 text-sm text-blue-700 dark:bg-blue-900/20 dark:text-blue-400"},Jt={__name:"ApiKeyInput",setup(F){const v=X(),{apiKey:s,loading:f,multiKeyMode:x}=Q(v),{queryStats:p,clearInput:m}=v,b=E(()=>{if(!x.value||!s.value)return[];const k=s.value.split(/[,\n]+/).map($=>$.trim()).filter($=>$.length>0);return[...new Set(k)].slice(0,30)}),y=E(()=>x.value?b.value.length>0:s.value&&s.value.trim().length>0);return(k,u)=>(r(),l("div",Lt,[u[15]||(u[15]=t("div",{class:"wide-card-title mb-6"},[t("h2",{class:"mb-2 text-2xl font-bold text-gray-900 dark:text-gray-200"},[t("i",{class:"fas fa-chart-line mr-3"}),h(" 使用统计查询 ")]),t("p",{class:"text-base text-gray-600 dark:text-gray-400"},"查询您的 API Key 使用情况和统计数据")],-1)),t("div",At,[t("div",Mt,[t("label",Pt,[u[8]||(u[8]=t("i",{class:"fas fa-key mr-2"},null,-1)),h(" "+i(e(x)?"输入您的 API Keys（每行一个或用逗号分隔）":"输入您的 API Key"),1)]),t("div",It,[t("div",qt,[t("button",{class:U(["mode-switch-btn",{active:!e(x)}]),title:"单一模式",onClick:u[0]||(u[0]=$=>x.value=!1)},u[9]||(u[9]=[t("i",{class:"fas fa-key"},null,-1),t("span",{class:"ml-2 hidden sm:inline"},"单一",-1)]),2),t("button",{class:U(["mode-switch-btn",{active:e(x)}]),title:"聚合模式",onClick:u[1]||(u[1]=$=>x.value=!0)},[u[10]||(u[10]=t("i",{class:"fas fa-layer-group"},null,-1)),u[11]||(u[11]=t("span",{class:"ml-2 hidden sm:inline"},"聚合",-1)),e(x)&&b.value.length>0?(r(),l("span",Dt,i(b.value.length),1)):A("",!0)],2)])])]),t("div",Ut,[t("div",Rt,[e(x)?(r(),l("div",jt,[ut(t("textarea",{"onUpdate:modelValue":u[4]||(u[4]=$=>xt(s)?s.value=$:null),class:"wide-card-input w-full resize-y",disabled:e(f),placeholder:`请输入您的 API Keys，支持以下格式：
cr_xxx
cr_yyy
或
cr_xxx, cr_yyy`,rows:"4",onKeyup:u[5]||(u[5]=mt(yt((...$)=>e(p)&&e(p)(...$),["ctrl"]),["enter"]))},null,40,Ft),[[ct,e(s)]]),e(s)&&!e(f)?(r(),l("button",{key:0,class:"absolute right-2 top-2 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300",title:"清空输入",onClick:u[6]||(u[6]=(...$)=>e(m)&&e(m)(...$))},u[12]||(u[12]=[t("i",{class:"fas fa-times-circle"},null,-1)]))):A("",!0)])):ut((r(),l("input",{key:0,"onUpdate:modelValue":u[2]||(u[2]=$=>xt(s)?s.value=$:null),class:"wide-card-input w-full",disabled:e(f),placeholder:"请输入您的 API Key (cr_...)",type:"password",onKeyup:u[3]||(u[3]=mt((...$)=>e(p)&&e(p)(...$),["enter"]))},null,40,Nt)),[[ct,e(s)]])]),t("div",Ot,[t("button",{class:"btn btn-primary btn-query flex h-full w-full items-center justify-center gap-2",disabled:e(f)||!y.value,onClick:u[7]||(u[7]=(...$)=>e(p)&&e(p)(...$))},[e(f)?(r(),l("i",Wt)):(r(),l("i",Bt)),h(" "+i(e(f)?"查询中...":"查询统计"),1)],8,Et)])]),t("div",Vt,[u[13]||(u[13]=t("i",{class:"fas fa-shield-alt mr-2"},null,-1)),h(" "+i(e(x)?"您的 API Keys 仅用于查询统计数据，不会被存储。聚合模式下部分个体化信息将不显示。":"您的 API Key 仅用于查询自己的统计数据，不会被存储或用于其他用途"),1)]),e(x)?(r(),l("div",zt,u[14]||(u[14]=[t("i",{class:"fas fa-lightbulb mr-2"},null,-1),t("span",null,"提示：最多支持同时查询 30 个 API Keys。使用 Ctrl+Enter 快速查询。",-1)]))):A("",!0)])]))}},Yt=G(Jt,[["__scopeId","data-v-11e74200"]]),Ht={class:"space-y-6 md:space-y-8"},Gt={class:"grid grid-cols-1 items-stretch gap-4 md:gap-6 xl:grid-cols-[minmax(0,1.5fr)_minmax(0,1fr)]"},Qt={class:"card-section"},Xt={class:"section-header"},Zt={class:"header-title"},te={key:0,class:"info-grid"},ee={class:"info-item"},se={class:"info-value"},ae={class:"info-item"},re={class:"info-value text-green-600 dark:text-emerald-400"},ie={key:0,class:"info-item"},oe={class:"info-value text-red-500 dark:text-red-400"},le={class:"info-item"},ne={class:"info-value"},de={class:"info-item"},ue={class:"info-value"},ce={class:"info-item"},me={class:"info-value text-indigo-600 dark:text-indigo-300"},xe={key:1,class:"info-item xl:col-span-2"},ge={class:"space-y-2"},fe={class:"truncate"},ye={class:"font-semibold"},pe={key:1,class:"info-grid"},ve={class:"info-item"},be={class:"info-value break-all"},_e={class:"info-item"},ke={class:"info-item"},he={class:"info-value"},we={class:"info-item"},$e={class:"info-value break-all"},Se={class:"info-item xl:col-span-2"},Ce={class:"info-value"},Te={class:"ml-2 text-xs text-gray-500 dark:text-gray-400"},Ke={key:0,class:"text-red-500 dark:text-red-400"},Le={key:1,class:"text-orange-500 dark:text-orange-400"},Ae={key:2},Me={key:2,class:"text-gray-400 dark:text-gray-500"},Pe={class:"card-section"},Ie={class:"section-header"},qe={class:"header-tag"},De={class:"metric-grid"},Ue={class:"metric-card"},Re={class:"metric-value text-green-600 dark:text-emerald-300"},Ne={class:"metric-label"},je={class:"metric-card"},Fe={class:"metric-value text-blue-600 dark:text-sky-300"},Oe={class:"metric-label"},Ee={class:"metric-card"},We={class:"metric-value text-purple-600 dark:text-violet-300"},Be={class:"metric-label"},Ve={class:"metric-card"},ze={class:"metric-value text-amber-500 dark:text-amber-300"},Je={class:"metric-label"},Ye={key:0,class:"card-section"},He={class:"flex items-center justify-between gap-3"},Ge={class:"flex items-center gap-3"},Qe={class:"account-name"},Xe={class:"account-sub"},Ze={key:0,class:"mt-3 space-y-2"},ts={class:"progress-row"},es={class:"progress-track"},ss={class:"progress-value"},as={class:"flex flex-wrap items-center gap-2 text-xs text-gray-600 dark:text-gray-300"},rs={key:0,class:"font-medium text-indigo-600 dark:text-indigo-400"},is={key:1,class:"mt-3"},os={key:0,class:"space-y-2"},ls={class:"quota-header"},ns={class:"quota-percent"},ds={class:"progress-track"},us={class:"quota-foot"},cs={key:1,class:"rounded-xl bg-slate-100 px-3 py-2 text-xs text-slate-500 dark:bg-slate-800 dark:text-slate-300"},ms={__name:"StatsOverview",setup(F){const v=X(),{statsData:s,statsPeriod:f,currentPeriodData:x,multiKeyMode:p,aggregatedStats:m,individualStats:b,invalidKeys:y}=Q(v),k=E(()=>!b.value||b.value.length===0?[]:[...b.value].sort((n,a)=>{var g,K;return(((g=a.usage)==null?void 0:g.allTokens)||0)-(((K=n.usage)==null?void 0:K.allTokens)||0)}).slice(0,3)),u=n=>{var g;return!m.value||!m.value.usage.allTokens?0:((((g=n.usage)==null?void 0:g.allTokens)||0)/m.value.usage.allTokens*100).toFixed(1)},$=n=>{if(!n)return"无";try{return St(n).format("YYYY年MM月DD日 HH:mm")}catch{return"格式错误"}},I=n=>n?new Date(n).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"",C=n=>n?new Date(n)<new Date:!1,w=n=>{if(!n)return!1;const K=(new Date(n)-new Date)/(1e3*60*60*24);return K>0&&K<=7},T=n=>(typeof n!="number"&&(n=parseInt(n)||0),n===0?"0":n>=1e6?(n/1e6).toFixed(1)+"M":n>=1e3?(n/1e3).toFixed(1)+"K":n.toLocaleString()),M=n=>({claude:"Claude",gemini:"Gemini",all:"全部模型"})[n]||n||"未知",c=E(()=>{var g,K;const n=(K=(g=s.value)==null?void 0:g.accounts)==null?void 0:K.details;if(!n)return[];const a=[];return n.claude&&n.claude.accountType==="dedicated"&&a.push({key:"claude",...n.claude}),n.openai&&n.openai.accountType==="dedicated"&&a.push({key:"openai",...n.openai}),a}),o=E(()=>{const n=c.value.length;return n<=1?"md:grid-cols-1 lg:grid-cols-1":n===2?"md:grid-cols-2":"md:grid-cols-2 xl:grid-cols-3"}),N=n=>n?n.platform==="openai"?"OpenAI 专属账号":"Claude 专属账号":"专属账号",W=n=>{if(!n||n<=0)return"";const a=Math.floor(n),g=Math.floor(a/1440),K=Math.floor(a%1440/60),R=a%60;return g>0?K>0?`${g}天${K}小时`:`${g}天`:K>0?R>0?`${K}小时${R}分钟`:`${K}小时`:`${R}分钟`},O=n=>{if(!n)return{text:"状态未知",class:"text-gray-400"};if(n.isRateLimited){const a=W(n.minutesRemaining);return{text:`限流中${a?` · 剩余约 ${a}`:""}`,class:"text-red-500 dark:text-red-400"}}return{text:"未限流",class:"text-green-600 dark:text-emerald-400"}},q=(n,a)=>{if(!n||!a)return"暂无时间窗口信息";const g=new Date(n),K=new Date(a),R=d=>`${`${d.getHours()}`.padStart(2,"0")}:${`${d.getMinutes()}`.padStart(2,"0")}`;return`${R(g)} - ${R(K)}`},S=n=>{if(!n||n<=0)return"";const a=Math.floor(n/60),g=n%60;return a>0?`${a}小时${g}分钟`:`${g}分钟`},Z=(n,a)=>{var K;if(!n)return"bg-gradient-to-r from-blue-500 to-indigo-500";if((K=a==null?void 0:a.rateLimitStatus)!=null&&K.isRateLimited)return"bg-gradient-to-r from-red-500 to-red-600";const g=String(n).toLowerCase();return g==="rejected"?"bg-gradient-to-r from-red-500 to-red-600":g==="allowed_warning"?"bg-gradient-to-r from-yellow-500 to-orange-500":"bg-gradient-to-r from-blue-500 to-indigo-500"},J=n=>{if(!n)return null;const a=typeof n.usedPercent=="number"&&!Number.isNaN(n.usedPercent)?n.usedPercent:null,g=typeof n.resetAfterSeconds=="number"&&!Number.isNaN(n.resetAfterSeconds)?n.resetAfterSeconds:null,K=typeof n.remainingSeconds=="number"?n.remainingSeconds:null,R=n.resetAt?Date.parse(n.resetAt):null;return g!==null&&(K!==null&&K<=0||R!==null&&!Number.isNaN(R)&&Date.now()>=R)?0:a===null?null:Math.max(0,Math.min(100,a))},it=n=>{const a=J(n);return a===null?"bg-gradient-to-r from-gray-300 to-gray-400":a>=90?"bg-gradient-to-r from-red-500 to-red-600":a>=75?"bg-gradient-to-r from-yellow-500 to-orange-500":"bg-gradient-to-r from-emerald-500 to-teal-500"},ot=n=>{const a=J(n);return a===null?"0%":`${a}%`},lt=n=>{const a=J(n);return a===null?"--":`${a.toFixed(1)}%`},rt=n=>{if(!n)return"--";let a=n.remainingSeconds;if(a==null&&(a=n.resetAfterSeconds),a==null||Number.isNaN(Number(a)))return"--";a=Math.max(0,Math.floor(Number(a)));const g=Math.floor(a/86400),K=Math.floor(a%86400/3600),R=Math.floor(a%3600/60),d=a%60;return g>0?K>0?`${g}天${K}小时`:`${g}天`:K>0?R>0?`${K}小时${R}分钟`:`${K}小时`:R>0?`${R}分钟`:`${d}秒`},et=n=>n==="secondary"?"周限":"5h";return(n,a)=>(r(),l("div",Ht,[t("div",Gt,[t("div",Qt,[t("header",Xt,[t("i",{class:U(["header-icon",e(p)?"fas fa-layer-group text-purple-500":"fas fa-info-circle text-blue-500"])},null,2),t("h3",Zt,i(e(p)?"批量查询概要":"API Key 信息"),1)]),e(p)&&e(m)?(r(),l("div",te,[t("div",ee,[a[0]||(a[0]=t("p",{class:"info-label"},"查询 Keys 数",-1)),t("p",se,i(e(m).totalKeys)+" 个",1)]),t("div",ae,[a[2]||(a[2]=t("p",{class:"info-label"},"有效 Keys 数",-1)),t("p",re,[a[1]||(a[1]=t("i",{class:"fas fa-check-circle mr-1"},null,-1)),h(i(e(m).activeKeys)+" 个 ",1)])]),e(y).length>0?(r(),l("div",ie,[a[4]||(a[4]=t("p",{class:"info-label"},"无效 Keys 数",-1)),t("p",oe,[a[3]||(a[3]=t("i",{class:"fas fa-times-circle mr-1"},null,-1)),h(i(e(y).length)+" 个 ",1)])])):A("",!0),t("div",le,[a[5]||(a[5]=t("p",{class:"info-label"},"总请求数",-1)),t("p",ne,i(T(e(m).usage.requests)),1)]),t("div",de,[a[6]||(a[6]=t("p",{class:"info-label"},"总 Token 数",-1)),t("p",ue,i(T(e(m).usage.allTokens)),1)]),t("div",ce,[a[7]||(a[7]=t("p",{class:"info-label"},"总费用",-1)),t("p",me,i(e(m).usage.formattedCost),1)]),e(b).length>1?(r(),l("div",xe,[a[8]||(a[8]=t("p",{class:"info-label"},"Top 3 贡献占比",-1)),t("div",ge,[(r(!0),l(z,null,H(k.value,g=>(r(),l("div",{key:g.apiId,class:"contributor-item"},[t("span",fe,i(g.name),1),t("span",ye,i(u(g))+"%",1)]))),128))])])):A("",!0)])):(r(),l("div",pe,[t("div",ve,[a[9]||(a[9]=t("p",{class:"info-label"},"名称",-1)),t("p",be,i(e(s).name),1)]),t("div",_e,[a[10]||(a[10]=t("p",{class:"info-label"},"状态",-1)),t("p",{class:U(["info-value font-semibold",e(s).isActive?"text-green-600 dark:text-emerald-400":"text-red-500 dark:text-red-400"])},[t("i",{class:U(["mr-1",e(s).isActive?"fas fa-check-circle":"fas fa-times-circle"])},null,2),h(" "+i(e(s).isActive?"活跃":"已停用"),1)],2)]),t("div",ke,[a[11]||(a[11]=t("p",{class:"info-label"},"权限",-1)),t("p",he,i(M(e(s).permissions)),1)]),t("div",we,[a[12]||(a[12]=t("p",{class:"info-label"},"创建时间",-1)),t("p",$e,i($(e(s).createdAt)),1)]),t("div",Se,[a[17]||(a[17]=t("p",{class:"info-label"},"过期时间",-1)),t("div",Ce,[e(s).expirationMode==="activation"&&!e(s).isActivated?(r(),l(z,{key:0},[a[13]||(a[13]=t("span",{class:"text-amber-600 dark:text-amber-400"},[t("i",{class:"fas fa-pause-circle mr-1"}),h("未激活 ")],-1)),t("span",Te," 首次使用后 "+i(e(s).activationDays||(e(s).activationUnit==="hours"?24:30))+" "+i(e(s).activationUnit==="hours"?"小时":"天")+"过期 ",1)],64)):e(s).expiresAt?(r(),l(z,{key:1},[C(e(s).expiresAt)?(r(),l("span",Ke,a[14]||(a[14]=[t("i",{class:"fas fa-exclamation-circle mr-1"},null,-1),h("已过期 ",-1)]))):w(e(s).expiresAt)?(r(),l("span",Le,[a[15]||(a[15]=t("i",{class:"fas fa-clock mr-1"},null,-1)),h(i(I(e(s).expiresAt)),1)])):(r(),l("span",Ae,i(I(e(s).expiresAt)),1))],64)):(r(),l("span",Me,a[16]||(a[16]=[t("i",{class:"fas fa-infinity mr-1"},null,-1),h("永不过期 ",-1)])))])])]))]),t("div",Pe,[t("header",Ie,[a[18]||(a[18]=t("i",{class:"header-icon fas fa-chart-bar text-green-500"},null,-1)),a[19]||(a[19]=t("h3",{class:"header-title"},"使用统计概览",-1)),t("span",qe,i(e(f)==="daily"?"今日":"本月"),1)]),t("div",De,[t("div",Ue,[t("p",Re,i(T(e(x).requests)),1),t("p",Ne,i(e(f)==="daily"?"今日":"本月")+"请求数",1)]),t("div",je,[t("p",Fe,i(T(e(x).allTokens)),1),t("p",Oe,i(e(f)==="daily"?"今日":"本月")+"Token 数",1)]),t("div",Ee,[t("p",We,i(e(x).formattedCost||"$0.000000"),1),t("p",Be,i(e(f)==="daily"?"今日":"本月")+"费用",1)]),t("div",Ve,[t("p",ze,i(T(e(x).inputTokens)),1),t("p",Je,i(e(f)==="daily"?"今日":"本月")+"输入 Token",1)])])])]),!e(p)&&c.value.length>0?(r(),l("div",Ye,[a[21]||(a[21]=t("header",{class:"section-header"},[t("i",{class:"header-icon fas fa-plug text-indigo-500"}),t("h3",{class:"header-title"},"专属账号运行状态"),t("span",{class:"header-tag"},"实时更新")],-1)),t("div",{class:U(["grid grid-cols-1 gap-4",o.value])},[(r(!0),l(z,null,H(c.value,g=>{var K,R,d,_,L,j;return r(),l("div",{key:g.id||g.key,class:"account-card"},[t("div",He,[t("div",Ge,[t("span",{class:U(["account-icon",g.platform==="claude"?"icon-claude":"icon-openai"])},[t("i",{class:U(g.platform==="claude"?"fas fa-meteor":"fas fa-robot")},null,2)],2),t("div",null,[t("p",Qe,i(N(g)),1),t("p",Xe,i(g.platform==="claude"?"会话窗口":"额度窗口"),1)])]),O(g.rateLimitStatus)?(r(),l("div",{key:0,class:U(["rate-badge",O(g.rateLimitStatus).class])},[a[20]||(a[20]=t("i",{class:"fas fa-tachometer-alt mr-1"},null,-1)),h(" "+i(O(g.rateLimitStatus).text),1)],2)):A("",!0)]),g.platform==="claude"?(r(),l("div",Ze,[t("div",ts,[t("div",es,[t("div",{class:U(["progress-bar",Z((K=g.sessionWindow)==null?void 0:K.sessionWindowStatus,g)]),style:tt({width:`${Math.min(100,Math.max(0,((R=g.sessionWindow)==null?void 0:R.progress)||0))}%`})},null,6)]),t("span",ss,i(Math.min(100,Math.max(0,Math.round(((d=g.sessionWindow)==null?void 0:d.progress)||0))))+"% ",1)]),t("div",as,[t("span",null,i(q((_=g.sessionWindow)==null?void 0:_.windowStart,(L=g.sessionWindow)==null?void 0:L.windowEnd)),1),((j=g.sessionWindow)==null?void 0:j.remainingTime)>0?(r(),l("span",rs," 剩余 "+i(S(g.sessionWindow.remainingTime)),1)):A("",!0)])])):g.platform==="openai"?(r(),l("div",is,[g.codexUsage?(r(),l("div",os,[(r(),l(z,null,H(["primary","secondary"],P=>{var B,st,nt,dt;return t("div",{key:`${g.key}-${P}`,class:"quota-row"},[t("div",ls,[t("span",{class:U(["quota-tag",P==="primary"?"tag-indigo":"tag-blue"])},i(et(P)),3),t("span",ns,i(lt((B=g.codexUsage)==null?void 0:B[P])),1)]),t("div",ds,[t("div",{class:U(["progress-bar",it((st=g.codexUsage)==null?void 0:st[P])]),style:tt({width:ot((nt=g.codexUsage)==null?void 0:nt[P])})},null,6)]),t("div",us," 重置剩余 "+i(rt((dt=g.codexUsage)==null?void 0:dt[P])),1)])}),64))])):(r(),l("p",cs," 暂无额度使用数据 "))])):A("",!0)])}),128))],2)])):A("",!0)]))}},xs=G(ms,[["__scopeId","data-v-b72df2cd"]]),gs={class:"card p-4 md:p-6"},fs={class:"mb-3 flex flex-col text-lg font-bold text-gray-900 dark:text-gray-100 sm:flex-row sm:items-center md:mb-4 md:text-xl"},ys={class:"text-xs font-normal text-gray-600 dark:text-gray-400 sm:ml-2 md:text-sm"},ps={class:"space-y-2 md:space-y-3"},vs={class:"flex items-center justify-between"},bs={class:"text-sm font-medium text-gray-900 dark:text-gray-100 md:text-base"},_s={class:"flex items-center justify-between"},ks={class:"text-sm font-medium text-gray-900 dark:text-gray-100 md:text-base"},hs={class:"flex items-center justify-between"},ws={class:"text-sm font-medium text-gray-900 dark:text-gray-100 md:text-base"},$s={class:"flex items-center justify-between"},Ss={class:"text-sm font-medium text-gray-900 dark:text-gray-100 md:text-base"},Cs={class:"mt-3 border-t border-gray-200 pt-3 dark:border-gray-700 md:mt-4 md:pt-4"},Ts={class:"flex items-center justify-between font-bold text-gray-900 dark:text-gray-100"},Ks={class:"text-sm md:text-base"},Ls={class:"text-lg md:text-xl"},As={__name:"TokenDistribution",setup(F){const v=X(),{statsPeriod:s,currentPeriodData:f}=Q(v),x=p=>(typeof p!="number"&&(p=parseInt(p)||0),p===0?"0":p>=1e6?(p/1e6).toFixed(1)+"M":p>=1e3?(p/1e3).toFixed(1)+"K":p.toLocaleString());return(p,m)=>(r(),l("div",gs,[t("h3",fs,[m[0]||(m[0]=t("span",{class:"flex items-center"},[t("i",{class:"fas fa-coins mr-2 text-sm text-yellow-500 md:mr-3 md:text-base"}),h(" Token 使用分布 ")],-1)),t("span",ys,"("+i(e(s)==="daily"?"今日":"本月")+")",1)]),t("div",ps,[t("div",vs,[m[1]||(m[1]=t("span",{class:"flex items-center text-sm text-gray-600 dark:text-gray-400 md:text-base"},[t("i",{class:"fas fa-arrow-right mr-1 text-xs text-green-500 md:mr-2 md:text-sm"}),h(" 输入 Token ")],-1)),t("span",bs,i(x(e(f).inputTokens)),1)]),t("div",_s,[m[2]||(m[2]=t("span",{class:"flex items-center text-sm text-gray-600 dark:text-gray-400 md:text-base"},[t("i",{class:"fas fa-arrow-left mr-1 text-xs text-blue-500 md:mr-2 md:text-sm"}),h(" 输出 Token ")],-1)),t("span",ks,i(x(e(f).outputTokens)),1)]),t("div",hs,[m[3]||(m[3]=t("span",{class:"flex items-center text-sm text-gray-600 dark:text-gray-400 md:text-base"},[t("i",{class:"fas fa-save mr-1 text-xs text-purple-500 md:mr-2 md:text-sm"}),h(" 缓存创建 Token ")],-1)),t("span",ws,i(x(e(f).cacheCreateTokens)),1)]),t("div",$s,[m[4]||(m[4]=t("span",{class:"flex items-center text-sm text-gray-600 dark:text-gray-400 md:text-base"},[t("i",{class:"fas fa-download mr-1 text-xs text-orange-500 md:mr-2 md:text-sm"}),h(" 缓存读取 Token ")],-1)),t("span",Ss,i(x(e(f).cacheReadTokens)),1)])]),t("div",Cs,[t("div",Ts,[t("span",Ks,i(e(s)==="daily"?"今日":"本月")+"总计",1),t("span",Ls,i(x(e(f).allTokens)),1)])])]))}},Ms=G(As,[["__scopeId","data-v-d9e5c1dd"]]),Ps={class:"flex h-full flex-col gap-4 md:gap-6"},Is={class:"card flex h-full flex-col p-4 md:p-6"},qs={class:"mb-3 flex items-center text-lg font-bold text-gray-900 dark:text-gray-100 md:mb-4 md:text-xl"},Ds={key:0,class:"space-y-4"},Us={class:"rounded-lg bg-gradient-to-r from-blue-50 to-indigo-50 p-4 dark:from-blue-900/20 dark:to-indigo-900/20"},Rs={class:"mb-3 flex items-center justify-between"},Ns={class:"rounded-full bg-blue-100 px-2 py-1 text-xs font-semibold text-blue-700 dark:bg-blue-800 dark:text-blue-200"},js={class:"grid grid-cols-2 gap-3"},Fs={class:"text-center"},Os={class:"text-lg font-bold text-gray-900 dark:text-gray-100"},Es={class:"text-center"},Ws={class:"text-lg font-bold text-green-600"},Bs={class:"rounded-lg bg-gradient-to-r from-purple-50 to-pink-50 p-4 dark:from-purple-900/20 dark:to-pink-900/20"},Vs={class:"space-y-2"},zs={class:"flex items-center justify-between"},Js={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},Ys={class:"flex items-center justify-between"},Hs={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},Gs={class:"flex items-center justify-between"},Qs={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},Xs={key:0,class:"rounded-lg bg-red-50 p-3 text-sm dark:bg-red-900/20"},Zs={class:"text-red-700 dark:text-red-300"},ta={key:1,class:"space-y-4 md:space-y-5"},ea={class:"mb-2 flex items-center justify-between"},sa={class:"text-xs text-gray-500 dark:text-gray-400 md:text-sm"},aa={key:0},ra={key:1,class:"flex items-center gap-1"},ia={key:0,class:"h-2 w-full rounded-full bg-gray-200 dark:bg-gray-700"},oa={key:1,class:"h-2 w-full rounded-full bg-gray-200"},la={class:"mb-2 flex items-center justify-between"},na={class:"text-xs text-gray-500 dark:text-gray-400 md:text-sm"},da={key:0},ua={key:1,class:"flex items-center gap-1"},ca={key:0,class:"h-2 w-full rounded-full bg-gray-200 dark:bg-gray-700"},ma={key:1,class:"h-2 w-full rounded-full bg-gray-200"},xa={key:0},ga={class:"mb-2 flex items-center justify-between"},fa={class:"text-xs text-gray-500 dark:text-gray-400 md:text-sm"},ya={class:"h-2 w-full rounded-full bg-gray-200 dark:bg-gray-700"},pa={key:1},va={class:"mt-2 text-xs text-gray-500 dark:text-gray-400"},ba={key:0},_a={key:1},ka={key:2},ha={class:"space-y-4 border-t border-gray-100 pt-3 dark:border-gray-700"},wa={class:"flex items-center justify-between"},$a={class:"text-sm font-medium text-gray-900 md:text-base"},Sa={key:0},Ca={key:1,class:"flex items-center gap-1"},Ta={class:"flex items-center justify-between"},Ka={class:"text-sm font-medium text-gray-900 md:text-base"},La={key:0,class:"text-orange-600"},Aa={key:1,class:"text-green-600"},Ma={class:"space-y-2"},Pa={class:"flex items-center justify-between"},Ia={class:"text-sm font-medium text-gray-900 md:text-base"},qa={key:0,class:"text-orange-600"},Da={key:1,class:"text-green-600"},Ua={key:0,class:"flex flex-wrap gap-2 rounded-lg bg-blue-50 p-2 dark:bg-blue-900/20 md:p-3"},Ra={key:0,class:"card p-4 md:p-6"},Na={class:"rounded-lg border border-amber-200 bg-amber-50 p-3 dark:border-amber-800 dark:bg-amber-900/20 md:p-4"},ja={class:"space-y-1 md:space-y-2"},Fa={class:"break-all text-gray-800 dark:text-gray-200"},Oa={__name:"LimitConfig",setup(F){const v=X(),{statsData:s,multiKeyMode:f,aggregatedStats:x,invalidKeys:p}=Q(v),m=E(()=>{var o;const c=(o=s.value)==null?void 0:o.restrictions;return c?c.enableModelRestriction===!0&&Array.isArray(c.restrictedModels)&&c.restrictedModels.length>0:!1}),b=E(()=>{var o;const c=(o=s.value)==null?void 0:o.restrictions;return c?c.enableClientRestriction===!0&&Array.isArray(c.allowedClients)&&c.allowedClients.length>0:!1}),y=()=>{if(!s.value.limits.dailyCostLimit||s.value.limits.dailyCostLimit===0)return 0;const c=s.value.limits.currentDailyCost/s.value.limits.dailyCostLimit*100;return Math.min(c,100)},k=()=>{const c=y();return c>=100?"bg-red-500":c>=80?"bg-yellow-500":"bg-green-500"},u=c=>{if(typeof c=="number")return Number.isFinite(c)?c:0;if(typeof c=="string"&&c.trim()!==""){const o=parseFloat(c);return Number.isFinite(o)?o:0}return 0},$=()=>{var o,N,W,O,q;const c=(N=(o=s.value)==null?void 0:o.limits)==null?void 0:N.currentTotalCost;if(c!=null&&c!==""){const S=u(c);if(S||S===0)return S}return u((q=(O=(W=s.value)==null?void 0:W.usage)==null?void 0:O.total)==null?void 0:q.cost)},I=()=>{if(!s.value.limits.totalCostLimit||s.value.limits.totalCostLimit===0)return 0;const c=$(),o=u(s.value.limits.totalCostLimit);if(o===0)return 0;const N=c/o*100;return Math.min(N,100)},C=()=>{const c=I();return c>=100?"bg-red-500":c>=80?"bg-yellow-500":"bg-blue-500"},w=()=>{if(!s.value.limits.weeklyOpusCostLimit||s.value.limits.weeklyOpusCostLimit===0)return 0;const c=s.value.limits.weeklyOpusCost/s.value.limits.weeklyOpusCostLimit*100;return Math.min(c,100)},T=()=>{const c=w();return c>=100?"bg-red-500":c>=80?"bg-yellow-500":"bg-indigo-500"},M=c=>(typeof c!="number"&&(c=parseInt(c)||0),c===0?"0":c>=1e6?(c/1e6).toFixed(1)+"M":c>=1e3?(c/1e3).toFixed(1)+"K":c.toLocaleString());return(c,o)=>(r(),l("div",Ps,[t("div",Is,[t("h3",qs,[o[0]||(o[0]=t("i",{class:"fas fa-shield-alt mr-2 text-sm text-red-500 md:mr-3 md:text-base"},null,-1)),h(" "+i(e(f)?"限制配置（聚合查询模式）":"限制配置"),1)]),e(f)&&e(x)?(r(),l("div",Ds,[t("div",Us,[t("div",Rs,[o[1]||(o[1]=t("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},[t("i",{class:"fas fa-layer-group mr-2 text-blue-500"}),h(" API Keys 概况 ")],-1)),t("span",Ns,i(e(x).activeKeys)+"/"+i(e(x).totalKeys),1)]),t("div",js,[t("div",Fs,[t("div",Os,i(e(x).totalKeys),1),o[2]||(o[2]=t("div",{class:"text-xs text-gray-600 dark:text-gray-400"},"总计 Keys",-1))]),t("div",Es,[t("div",Ws,i(e(x).activeKeys),1),o[3]||(o[3]=t("div",{class:"text-xs text-gray-600 dark:text-gray-400"},"激活 Keys",-1))])])]),t("div",Bs,[o[7]||(o[7]=t("div",{class:"mb-3 flex items-center"},[t("i",{class:"fas fa-chart-pie mr-2 text-purple-500"}),t("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"聚合统计摘要")],-1)),t("div",Vs,[t("div",zs,[o[4]||(o[4]=t("span",{class:"text-xs text-gray-600 dark:text-gray-400"},[t("i",{class:"fas fa-database mr-1 text-gray-400"}),h(" 总请求数 ")],-1)),t("span",Js,i(M(e(x).usage.requests)),1)]),t("div",Ys,[o[5]||(o[5]=t("span",{class:"text-xs text-gray-600 dark:text-gray-400"},[t("i",{class:"fas fa-coins mr-1 text-yellow-500"}),h(" 总 Tokens ")],-1)),t("span",Hs,i(M(e(x).usage.allTokens)),1)]),t("div",Gs,[o[6]||(o[6]=t("span",{class:"text-xs text-gray-600 dark:text-gray-400"},[t("i",{class:"fas fa-dollar-sign mr-1 text-green-500"}),h(" 总费用 ")],-1)),t("span",Qs,i(e(x).usage.formattedCost),1)])])]),e(p)&&e(p).length>0?(r(),l("div",Xs,[o[8]||(o[8]=t("i",{class:"fas fa-exclamation-triangle mr-2 text-red-600 dark:text-red-400"},null,-1)),t("span",Zs,i(e(p).length)+" 个无效的 API Key ",1)])):A("",!0),o[9]||(o[9]=t("div",{class:"rounded-lg bg-gray-50 p-3 text-xs text-gray-600 dark:bg-gray-800 dark:text-gray-400"},[t("i",{class:"fas fa-info-circle mr-1"}),h(" 每个 API Key 有独立的限制设置，聚合模式下不显示单个限制配置 ")],-1))])):A("",!0),e(f)?A("",!0):(r(),l("div",ta,[t("div",null,[t("div",ea,[o[11]||(o[11]=t("span",{class:"text-sm font-medium text-gray-600 dark:text-gray-400 md:text-base"},"每日费用限制",-1)),t("span",sa,[e(s).limits.dailyCostLimit>0?(r(),l("span",aa," $"+i(e(s).limits.currentDailyCost.toFixed(4))+" / $"+i(e(s).limits.dailyCostLimit.toFixed(2)),1)):(r(),l("span",ra,[h(" $"+i(e(s).limits.currentDailyCost.toFixed(4))+" / ",1),o[10]||(o[10]=t("i",{class:"fas fa-infinity"},null,-1))]))])]),e(s).limits.dailyCostLimit>0?(r(),l("div",ia,[t("div",{class:U(["h-2 rounded-full transition-all duration-300",k()]),style:tt({width:y()+"%"})},null,6)])):(r(),l("div",oa,o[12]||(o[12]=[t("div",{class:"h-2 rounded-full bg-green-500",style:{width:"0%"}},null,-1)])))]),t("div",null,[t("div",la,[o[14]||(o[14]=t("span",{class:"text-sm font-medium text-gray-600 dark:text-gray-400 md:text-base"},"总费用限制",-1)),t("span",na,[e(s).limits.totalCostLimit>0?(r(),l("span",da," $"+i($().toFixed(4))+" / $"+i(e(s).limits.totalCostLimit.toFixed(2)),1)):(r(),l("span",ua,[h(" $"+i($().toFixed(4))+" / ",1),o[13]||(o[13]=t("i",{class:"fas fa-infinity"},null,-1))]))])]),e(s).limits.totalCostLimit>0?(r(),l("div",ca,[t("div",{class:U(["h-2 rounded-full transition-all duration-300",C()]),style:tt({width:I()+"%"})},null,6)])):(r(),l("div",ma,o[15]||(o[15]=[t("div",{class:"h-2 rounded-full bg-blue-500",style:{width:"0%"}},null,-1)])))]),e(s).limits.weeklyOpusCostLimit>0?(r(),l("div",xa,[t("div",ga,[o[16]||(o[16]=t("span",{class:"text-sm font-medium text-gray-600 dark:text-gray-400 md:text-base"},"Opus 模型周费用限制",-1)),t("span",fa," $"+i(e(s).limits.weeklyOpusCost.toFixed(4))+" / $"+i(e(s).limits.weeklyOpusCostLimit.toFixed(2)),1)]),t("div",ya,[t("div",{class:U(["h-2 rounded-full transition-all duration-300",T()]),style:tt({width:w()+"%"})},null,6)])])):A("",!0),e(s).limits.rateLimitWindow>0&&(e(s).limits.rateLimitRequests>0||e(s).limits.tokenLimit>0||e(s).limits.rateLimitCost>0)?(r(),l("div",pa,[Y(Ct,{"cost-limit":e(s).limits.rateLimitCost,"current-cost":e(s).limits.currentWindowCost,"current-requests":e(s).limits.currentWindowRequests,"current-tokens":e(s).limits.currentWindowTokens,label:"时间窗口限制","rate-limit-window":e(s).limits.rateLimitWindow,"request-limit":e(s).limits.rateLimitRequests,"show-progress":!0,"show-tooltip":!0,"token-limit":e(s).limits.tokenLimit,"window-end-time":e(s).limits.windowEndTime,"window-remaining-seconds":e(s).limits.windowRemainingSeconds,"window-start-time":e(s).limits.windowStartTime},null,8,["cost-limit","current-cost","current-requests","current-tokens","rate-limit-window","request-limit","token-limit","window-end-time","window-remaining-seconds","window-start-time"]),t("div",va,[o[17]||(o[17]=t("i",{class:"fas fa-info-circle mr-1"},null,-1)),e(s).limits.rateLimitCost>0?(r(),l("span",ba,' 请求次数和费用限制为"或"的关系，任一达到限制即触发限流 ')):e(s).limits.tokenLimit>0?(r(),l("span",_a,' 请求次数和Token使用量为"或"的关系，任一达到限制即触发限流 ')):(r(),l("span",ka," 仅限制请求次数 "))])])):A("",!0),t("div",ha,[t("div",wa,[o[19]||(o[19]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400 md:text-base"},"并发限制",-1)),t("span",$a,[e(s).limits.concurrencyLimit>0?(r(),l("span",Sa,i(e(s).limits.concurrencyLimit),1)):(r(),l("span",Ca,o[18]||(o[18]=[t("i",{class:"fas fa-infinity text-gray-400"},null,-1)])))])]),t("div",Ta,[o[22]||(o[22]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400 md:text-base"},"模型限制",-1)),t("span",Ka,[m.value?(r(),l("span",La,[o[20]||(o[20]=t("i",{class:"fas fa-exclamation-triangle mr-1 text-xs md:text-sm"},null,-1)),h(" 限制 "+i(e(s).restrictions.restrictedModels.length)+" 个模型 ",1)])):(r(),l("span",Aa,o[21]||(o[21]=[t("i",{class:"fas fa-check-circle mr-1 text-xs md:text-sm"},null,-1),h(" 允许所有模型 ",-1)])))])]),t("div",Ma,[t("div",Pa,[o[25]||(o[25]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400 md:text-base"},"客户端限制",-1)),t("span",Ia,[b.value?(r(),l("span",qa,[o[23]||(o[23]=t("i",{class:"fas fa-exclamation-triangle mr-1 text-xs md:text-sm"},null,-1)),h(" 限 "+i(e(s).restrictions.allowedClients.length)+" 种客户端使用 ",1)])):(r(),l("span",Da,o[24]||(o[24]=[t("i",{class:"fas fa-check-circle mr-1 text-xs md:text-sm"},null,-1),h(" 允许所有客户端 ",-1)])))])]),b.value?(r(),l("div",Ua,[(r(!0),l(z,null,H(e(s).restrictions.allowedClients,N=>(r(),l("span",{key:N,class:"flex items-center gap-1 rounded-full bg-white px-2 py-1 text-xs text-blue-700 shadow-sm dark:bg-slate-900 dark:text-blue-300 md:text-sm"},[o[26]||(o[26]=t("i",{class:"fas fa-id-badge"},null,-1)),h(" "+i(N),1)]))),128))])):A("",!0)])])]))]),m.value?(r(),l("div",Ra,[o[30]||(o[30]=t("h3",{class:"mb-3 flex items-center text-lg font-bold text-gray-900 dark:text-gray-100 md:mb-4 md:text-xl"},[t("i",{class:"fas fa-list-alt mr-2 text-sm text-amber-500 md:mr-3 md:text-base"}),h(" 详细限制信息 ")],-1)),t("div",Na,[o[28]||(o[28]=t("h4",{class:"mb-2 flex items-center text-sm font-bold text-amber-800 dark:text-amber-300 md:mb-3 md:text-base"},[t("i",{class:"fas fa-robot mr-1 text-xs md:mr-2 md:text-sm"}),h(" 受限模型列表 ")],-1)),t("div",ja,[(r(!0),l(z,null,H(e(s).restrictions.restrictedModels,N=>(r(),l("div",{key:N,class:"rounded border border-amber-200 bg-white px-2 py-1 text-xs dark:border-amber-700 dark:bg-gray-800 md:px-3 md:py-2 md:text-sm"},[o[27]||(o[27]=t("i",{class:"fas fa-ban mr-1 text-xs text-red-500 md:mr-2"},null,-1)),t("span",Fa,i(N),1)]))),128))]),o[29]||(o[29]=t("p",{class:"mt-2 text-xs text-amber-700 dark:text-amber-400 md:mt-3"},[t("i",{class:"fas fa-info-circle mr-1"}),h(" 此 API Key 不能访问以上列出的模型 ")],-1))])])):A("",!0)]))}},Ea=G(Oa,[["__scopeId","data-v-4813bec2"]]),Wa={class:"card h-full p-4 md:p-6"},Ba={class:"mb-3 flex flex-col text-lg font-bold text-gray-900 dark:text-gray-100 sm:flex-row sm:items-center md:mb-4 md:text-xl"},Va={class:"text-xs font-normal text-gray-600 dark:text-gray-400 sm:ml-2 md:text-sm"},za={key:0,class:"space-y-2 md:space-y-3"},Ja={class:"mb-1 flex items-center justify-between text-sm"},Ya={class:"truncate font-medium text-gray-700 dark:text-gray-300"},Ha={class:"text-xs text-gray-600 dark:text-gray-400"},Ga={class:"h-2 w-full rounded-full bg-gray-200 dark:bg-gray-700"},Qa={class:"mt-1 flex items-center justify-between text-xs text-gray-500 dark:text-gray-400"},Xa={key:0,class:"border-t border-gray-200 pt-2 dark:border-gray-700"},Za={class:"flex items-center justify-between text-sm text-gray-600 dark:text-gray-400"},tr={key:1,class:"flex h-32 items-center justify-center text-sm text-gray-500 dark:text-gray-400"},er={key:2,class:"flex h-32 items-center justify-center text-sm text-gray-500 dark:text-gray-400"},sr={__name:"AggregatedStatsCard",setup(F){const v=X(),{aggregatedStats:s,individualStats:f,statsPeriod:x,multiKeyMode:p}=Q(v),m=C=>C?x.value==="daily"?C.dailyUsage||C.usage:C.monthlyUsage||C.usage:null,b=E(()=>!f.value||f.value.length===0?[]:[...f.value].sort((C,w)=>{const T=m(C),M=m(w);return((M==null?void 0:M.cost)||0)-((T==null?void 0:T.cost)||0)}).slice(0,5)),y=E(()=>f.value?Math.max(0,f.value.length-5):0),k=E(()=>{var M,c;if(!f.value||!s.value)return 0;const C=b.value.reduce((o,N)=>{const W=m(N);return o+((W==null?void 0:W.cost)||0)},0),w=x.value==="daily"?((M=s.value.dailyUsage)==null?void 0:M.cost)||0:((c=s.value.monthlyUsage)==null?void 0:c.cost)||0;if(w===0)return 0;const T=w-C;return Math.max(0,Math.round(T/w*100))}),u=C=>{var c,o;if(!s.value)return 0;const w=x.value==="daily"?((c=s.value.dailyUsage)==null?void 0:c.cost)||0:((o=s.value.monthlyUsage)==null?void 0:o.cost)||0;if(w===0)return 0;const T=m(C),M=((T==null?void 0:T.cost)||0)/w*100;return Math.round(M)},$=C=>["bg-blue-500","bg-green-500","bg-purple-500","bg-yellow-500","bg-pink-500"][C]||"bg-gray-400",I=C=>(typeof C!="number"&&(C=parseInt(C)||0),C===0?"0":C>=1e6?(C/1e6).toFixed(1)+"M":C>=1e3?(C/1e3).toFixed(1)+"K":C.toLocaleString());return(C,w)=>(r(),l("div",Wa,[t("h3",Ba,[w[0]||(w[0]=t("span",{class:"flex items-center"},[t("i",{class:"fas fa-chart-pie mr-2 text-sm text-orange-500 md:mr-3 md:text-base"}),h(" 使用占比 ")],-1)),t("span",Va,"("+i(e(x)==="daily"?"今日":"本月")+")",1)]),e(s)&&e(f).length>0?(r(),l("div",za,[(r(!0),l(z,null,H(b.value,(T,M)=>{var c,o;return r(),l("div",{key:T.apiId,class:"relative"},[t("div",Ja,[t("span",Ya,i(T.name||`Key ${M+1}`),1),t("span",Ha,i(u(T))+"% ",1)]),t("div",Ga,[t("div",{class:U(["h-2 rounded-full transition-all duration-300",$(M)]),style:tt({width:u(T)+"%"})},null,6)]),t("div",Qa,[t("span",null,i(I(((c=m(T))==null?void 0:c.requests)||0))+"次",1),t("span",null,i(((o=m(T))==null?void 0:o.formattedCost)||"$0.00"),1)])])}),128)),y.value>0?(r(),l("div",Xa,[t("div",Za,[t("span",null,"其他 "+i(y.value)+" 个Keys",1),t("span",null,i(k.value)+"%",1)])])):A("",!0)])):e(p)?(r(),l("div",er,w[2]||(w[2]=[t("i",{class:"fas fa-chart-pie mr-2"},null,-1),h(" 暂无数据 ",-1)]))):(r(),l("div",tr,w[1]||(w[1]=[t("div",{class:"text-center"},[t("i",{class:"fas fa-chart-pie mb-2 text-2xl"}),t("p",null,"使用占比仅在多Key查询时显示")],-1)])))]))}},ar=G(sr,[["__scopeId","data-v-39572a8e"]]),rr={class:"card p-4 md:p-6"},ir={class:"mb-4 md:mb-6"},or={class:"flex flex-col text-lg font-bold text-gray-900 dark:text-gray-100 sm:flex-row sm:items-center md:text-xl"},lr={class:"text-xs font-normal text-gray-600 dark:text-gray-400 sm:ml-2 md:text-sm"},nr={key:0,class:"py-6 text-center md:py-8"},dr={key:1,class:"space-y-3 md:space-y-4"},ur={class:"mb-2 flex items-start justify-between md:mb-3"},cr={class:"min-w-0 flex-1"},mr={class:"break-all text-base font-bold text-gray-900 dark:text-gray-100 md:text-lg"},xr={class:"text-xs text-gray-600 dark:text-gray-400 md:text-sm"},gr={class:"ml-3 flex-shrink-0 text-right"},fr={class:"text-base font-bold text-green-600 md:text-lg"},yr={class:"grid grid-cols-2 gap-2 text-xs md:grid-cols-4 md:gap-3 md:text-sm"},pr={class:"rounded bg-gray-50 p-2 dark:bg-gray-700"},vr={class:"font-medium text-gray-900 dark:text-gray-100"},br={class:"rounded bg-gray-50 p-2 dark:bg-gray-700"},_r={class:"font-medium text-gray-900 dark:text-gray-100"},kr={class:"rounded bg-gray-50 p-2 dark:bg-gray-700"},hr={class:"font-medium text-gray-900 dark:text-gray-100"},wr={class:"rounded bg-gray-50 p-2 dark:bg-gray-700"},$r={class:"font-medium text-gray-900 dark:text-gray-100"},Sr={key:2,class:"py-6 text-center text-gray-500 dark:text-gray-400 md:py-8"},Cr={class:"text-sm md:text-base"},Tr={__name:"ModelUsageStats",setup(F){const v=X(),{statsPeriod:s,modelStats:f,modelStatsLoading:x}=Q(v),p=m=>(typeof m!="number"&&(m=parseInt(m)||0),m===0?"0":m>=1e6?(m/1e6).toFixed(1)+"M":m>=1e3?(m/1e3).toFixed(1)+"K":m.toLocaleString());return(m,b)=>(r(),l("div",rr,[t("div",ir,[t("h3",or,[b[0]||(b[0]=t("span",{class:"flex items-center"},[t("i",{class:"fas fa-robot mr-2 text-sm text-indigo-500 md:mr-3 md:text-base"}),h(" 模型使用统计 ")],-1)),t("span",lr,"("+i(e(s)==="daily"?"今日":"本月")+")",1)])]),e(x)?(r(),l("div",nr,b[1]||(b[1]=[t("i",{class:"fas fa-spinner loading-spinner mb-2 text-xl text-gray-600 dark:text-gray-400 md:text-2xl"},null,-1),t("p",{class:"text-sm text-gray-600 dark:text-gray-400 md:text-base"},"加载模型统计数据中...",-1)]))):e(f).length>0?(r(),l("div",dr,[(r(!0),l(z,null,H(e(f),(y,k)=>{var u;return r(),l("div",{key:k,class:"model-usage-item"},[t("div",ur,[t("div",cr,[t("h4",mr,i(y.model),1),t("p",xr,i(y.requests)+" 次请求 ",1)]),t("div",gr,[t("div",fr,i(((u=y.formatted)==null?void 0:u.total)||"$0.000000"),1),b[2]||(b[2]=t("div",{class:"text-xs text-gray-600 dark:text-gray-400 md:text-sm"},"总费用",-1))])]),t("div",yr,[t("div",pr,[b[3]||(b[3]=t("div",{class:"text-gray-600 dark:text-gray-400"},"输入 Token",-1)),t("div",vr,i(p(y.inputTokens)),1)]),t("div",br,[b[4]||(b[4]=t("div",{class:"text-gray-600 dark:text-gray-400"},"输出 Token",-1)),t("div",_r,i(p(y.outputTokens)),1)]),t("div",kr,[b[5]||(b[5]=t("div",{class:"text-gray-600 dark:text-gray-400"},"缓存创建",-1)),t("div",hr,i(p(y.cacheCreateTokens)),1)]),t("div",wr,[b[6]||(b[6]=t("div",{class:"text-gray-600 dark:text-gray-400"},"缓存读取",-1)),t("div",$r,i(p(y.cacheReadTokens)),1)])])])}),128))])):(r(),l("div",Sr,[b[7]||(b[7]=t("i",{class:"fas fa-chart-pie mb-3 text-2xl md:text-3xl"},null,-1)),t("p",Cr," 暂无"+i(e(s)==="daily"?"今日":"本月")+"模型使用数据 ",1)]))]))}},Kr=G(Tr,[["__scopeId","data-v-b3b8dc5f"]]),Lr={class:"glass-strong mt-6 rounded-3xl p-4 shadow-xl md:p-6"},Ar={class:"mb-4 flex items-center justify-between"},Mr={key:0,class:"flex justify-center py-8"},Pr={key:1,class:"overflow-x-auto"},Ir={class:"mb-3 text-sm text-gray-600 dark:text-gray-400"},qr={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Dr={class:"divide-y divide-gray-200 bg-white dark:divide-gray-700 dark:bg-gray-900"},Ur={class:"whitespace-nowrap px-4 py-3 text-sm text-gray-700 dark:text-gray-300"},Rr={class:"px-4 py-3 text-sm text-gray-700 dark:text-gray-300"},Nr={class:"rounded bg-blue-100 px-2 py-1 text-xs dark:bg-blue-900"},jr={class:"px-4 py-3 text-right text-sm text-gray-600 dark:text-gray-400"},Fr={class:"px-4 py-3 text-right text-sm text-gray-600 dark:text-gray-400"},Or={class:"px-4 py-3 text-right text-sm text-gray-600 dark:text-gray-400"},Er={class:"px-4 py-3 text-right text-sm text-gray-600 dark:text-gray-400"},Wr={class:"px-4 py-3 text-right text-sm font-medium text-gray-900 dark:text-gray-100"},Br={class:"px-4 py-3 text-right text-sm font-medium text-gray-900 dark:text-gray-100"},Vr={class:"px-4 py-3 text-center text-sm"},zr={key:0,class:"rounded-full bg-yellow-100 px-2 py-1 text-xs text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"},Jr={key:1,class:"rounded-full bg-orange-100 px-2 py-1 text-xs text-orange-800 dark:bg-orange-900 dark:text-orange-200"},Yr={key:2,class:"rounded-full bg-green-100 px-2 py-1 text-xs text-green-800 dark:bg-green-900 dark:text-green-200"},Hr={key:2,class:"py-8 text-center text-gray-500 dark:text-gray-400"},Gr={key:3,class:"py-8 text-center text-gray-500 dark:text-gray-400"},Qr={__name:"RequestDetailsTable",props:{apiId:{type:String,required:!0},range:{type:String,default:"today"}},setup(F){const v=F,s=D(!1),f=D(!1),x=D([]);async function p(){if(s.value){s.value=!1;return}f.value=!0,s.value=!0;try{const y=await V.request(`/admin/api-keys/${v.apiId}/usage-details?range=${v.range}&limit=100`,{method:"GET"});y.success&&y.data?x.value=y.data:x.value=[]}catch(y){console.error("Failed to load request details:",y),x.value=[]}finally{f.value=!1}}function m(y){return y?y>=1e6?(y/1e6).toFixed(2)+"M":y>=1e3?(y/1e3).toFixed(2)+"K":y.toString():"0"}function b(y){if(!y)return"-";const k=new Date(y);if(Number.isNaN(k.getTime()))return y;const u=String(k.getMonth()+1).padStart(2,"0"),$=String(k.getDate()).padStart(2,"0"),I=String(k.getHours()).padStart(2,"0"),C=String(k.getMinutes()).padStart(2,"0"),w=String(k.getSeconds()).padStart(2,"0");return`${u}-${$} ${I}:${C}:${w}`}return(y,k)=>(r(),l("div",Lr,[t("div",Ar,[k[3]||(k[3]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100 md:text-xl"},[t("i",{class:"fas fa-list-alt mr-2 text-blue-500"}),h(" 请求明细记录 ")],-1)),s.value?(r(),l("button",{key:1,class:"rounded-lg bg-gray-500 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-gray-600",onClick:k[0]||(k[0]=u=>s.value=!1)},k[2]||(k[2]=[t("i",{class:"fas fa-eye-slash mr-2"},null,-1),h(" 收起 ",-1)]))):(r(),l("button",{key:0,class:"rounded-lg bg-blue-500 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-blue-600",onClick:p},k[1]||(k[1]=[t("i",{class:"fas fa-eye mr-2"},null,-1),h(" 查看详情 ",-1)])))]),f.value?(r(),l("div",Mr,k[4]||(k[4]=[t("div",{class:"loading-spinner h-12 w-12 border-4 border-blue-500"},null,-1)]))):s.value&&x.value.length>0?(r(),l("div",Pr,[t("div",Ir," 显示最近 "+i(x.value.length)+" 条请求记录 ",1),t("table",qr,[k[5]||(k[5]=t("thead",{class:"bg-gray-50 dark:bg-gray-800"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase text-gray-500 dark:text-gray-400"}," 时间 "),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase text-gray-500 dark:text-gray-400"}," 模型 "),t("th",{class:"px-4 py-3 text-right text-xs font-medium uppercase text-gray-500 dark:text-gray-400"}," 输入 "),t("th",{class:"px-4 py-3 text-right text-xs font-medium uppercase text-gray-500 dark:text-gray-400"}," 输出 "),t("th",{class:"px-4 py-3 text-right text-xs font-medium uppercase text-gray-500 dark:text-gray-400"}," 缓存创建 "),t("th",{class:"px-4 py-3 text-right text-xs font-medium uppercase text-gray-500 dark:text-gray-400"}," 缓存读取 "),t("th",{class:"px-4 py-3 text-right text-xs font-medium uppercase text-gray-500 dark:text-gray-400"}," 总计 "),t("th",{class:"px-4 py-3 text-right text-xs font-medium uppercase text-gray-500 dark:text-gray-400"}," 费用 "),t("th",{class:"px-4 py-3 text-center text-xs font-medium uppercase text-gray-500 dark:text-gray-400"}," 状态 ")])],-1)),t("tbody",Dr,[(r(!0),l(z,null,H(x.value,u=>{var $,I;return r(),l("tr",{key:u.id,class:"hover:bg-gray-50 dark:hover:bg-gray-800"},[t("td",Ur,i(b(u.occurred_at)),1),t("td",Rr,[t("span",Nr,i(u.model||"unknown"),1)]),t("td",jr,i(m(u.input_tokens)),1),t("td",Fr,i(m(u.output_tokens)),1),t("td",Or,i(m(u.cache_create_tokens||0)),1),t("td",Er,i(m(u.cache_read_tokens||0)),1),t("td",Wr,i(m(u.total_tokens)),1),t("td",Br," $"+i((u.estimated_cost||0).toFixed(6)),1),t("td",Vr,[($=u.metadata)!=null&&$._no_usage_data?(r(),l("span",zr," 需核对 ")):(I=u.metadata)!=null&&I._requires_manual_review?(r(),l("span",Jr," 已更新 ")):(r(),l("span",Yr," 正常 "))])])}),128))])])])):s.value&&x.value.length===0?(r(),l("div",Hr,k[6]||(k[6]=[t("i",{class:"fas fa-inbox mb-2 text-4xl"},null,-1),t("p",null,"暂无请求记录",-1)]))):(r(),l("div",Gr,k[7]||(k[7]=[t("i",{class:"fas fa-hand-pointer mb-2 text-4xl"},null,-1),t("p",null,'点击"查看详情"按钮查看请求明细',-1)])))]))}},Xr=G(Qr,[["__scopeId","data-v-669f78c0"]]),Zr={class:"glass-strong mb-6 rounded-3xl p-4 shadow-xl md:mb-8 md:p-6"},ti={class:"flex flex-col items-center justify-between gap-4 md:flex-row"},ei={class:"flex items-center gap-2 md:gap-4"},si={class:"flex items-center"},ai={key:0,class:"h-8 w-px bg-gradient-to-b from-transparent via-gray-300 to-transparent opacity-50 dark:via-gray-600"},ri={class:"mb-6 md:mb-8"},ii={class:"flex justify-center"},oi={class:"inline-flex w-full max-w-md rounded-full border border-white/20 bg-white/10 p-1 shadow-lg backdrop-blur-xl md:w-auto"},li={key:0,class:"tab-content"},ni={key:0,class:"mb-6 md:mb-8"},di={class:"rounded-xl border border-red-500/30 bg-red-500/20 p-3 text-sm text-red-800 backdrop-blur-sm dark:border-red-500/20 dark:bg-red-500/10 dark:text-red-200 md:p-4 md:text-base"},ui={key:1,class:"fade-in"},ci={class:"glass-strong rounded-3xl p-4 shadow-xl md:p-6"},mi={class:"mb-4 border-b border-gray-200 pb-4 dark:border-gray-700 md:mb-6 md:pb-6"},xi={class:"flex flex-col items-start justify-between gap-3 md:flex-row md:items-center md:gap-4"},gi={class:"flex w-full gap-2 md:w-auto"},fi=["disabled"],yi=["disabled"],pi={class:"mb-6 mt-6 grid grid-cols-1 gap-4 md:mb-8 md:mt-8 md:gap-6 xl:grid-cols-2 xl:items-stretch"},vi={key:1,class:"tab-content"},bi={class:"glass-strong rounded-3xl shadow-xl"},_i={__name:"ApiStatsView",setup(F){const v=vt(),s=X(),f=ht(),x=D("stats"),p=E(()=>f.isDarkMode),{apiKey:m,apiId:b,loading:y,modelStatsLoading:k,oemLoading:u,error:$,statsPeriod:I,statsData:C,oemSettings:w,multiKeyMode:T}=Q(s),{queryStats:M,switchPeriod:c,loadStatsWithApiId:o,loadOemSettings:N,reset:W}=s,O=q=>{(q.ctrlKey||q.metaKey)&&q.key==="Enter"&&(!y.value&&m.value.trim()&&M(),q.preventDefault()),q.key==="Escape"&&W()};return pt(()=>{f.initTheme(),N();const q=v.query.apiId,S=v.query.apiKey;q&&q.match(/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/i)?(b.value=q,o()):S&&S.length>10&&(m.value=S),document.addEventListener("keydown",O)}),bt(()=>{document.removeEventListener("keydown",O)}),_t(m,q=>{q||s.clearData()}),(q,S)=>{const Z=kt("router-link");return r(),l("div",{class:U(["min-h-screen p-4 md:p-6",p.value?"gradient-bg-dark":"gradient-bg"])},[t("div",Zr,[t("div",ti,[Y(wt,{loading:e(u),"logo-src":e(w).siteIconData||e(w).siteIcon,subtitle:x.value==="stats"?"API Key 使用统计":"使用教程",title:e(w).siteName},null,8,["loading","logo-src","subtitle","title"]),t("div",ei,[t("div",si,[Y($t,{mode:"dropdown"})]),e(w).ldapEnabled||e(w).showAdminButton!==!1?(r(),l("div",ai)):A("",!0),e(w).ldapEnabled?(r(),at(Z,{key:1,class:"user-login-button flex items-center gap-2 rounded-2xl px-4 py-2 text-white transition-all duration-300 md:px-5 md:py-2.5",to:"/user-login"},{default:gt(()=>S[4]||(S[4]=[t("i",{class:"fas fa-user text-sm md:text-base"},null,-1),t("span",{class:"text-xs font-semibold tracking-wide md:text-sm"},"用户登录",-1)])),_:1,__:[4]})):A("",!0),e(w).showAdminButton!==!1?(r(),at(Z,{key:2,class:"admin-button-refined flex items-center gap-2 rounded-2xl px-4 py-2 transition-all duration-300 md:px-5 md:py-2.5",to:"/dashboard"},{default:gt(()=>S[5]||(S[5]=[t("i",{class:"fas fa-shield-alt text-sm md:text-base"},null,-1),t("span",{class:"text-xs font-semibold tracking-wide md:text-sm"},"管理后台",-1)])),_:1,__:[5]})):A("",!0)])])]),t("div",ri,[t("div",ii,[t("div",oi,[t("button",{class:U(["tab-pill-button",x.value==="stats"?"active":""]),onClick:S[0]||(S[0]=J=>x.value="stats")},S[6]||(S[6]=[t("i",{class:"fas fa-chart-line mr-1 md:mr-2"},null,-1),t("span",{class:"text-sm md:text-base"},"统计查询",-1)]),2),t("button",{class:U(["tab-pill-button",x.value==="tutorial"?"active":""]),onClick:S[1]||(S[1]=J=>x.value="tutorial")},S[7]||(S[7]=[t("i",{class:"fas fa-graduation-cap mr-1 md:mr-2"},null,-1),t("span",{class:"text-sm md:text-base"},"使用教程",-1)]),2)])])]),x.value==="stats"?(r(),l("div",li,[Y(Yt),e($)?(r(),l("div",ni,[t("div",di,[S[8]||(S[8]=t("i",{class:"fas fa-exclamation-triangle mr-2"},null,-1)),h(" "+i(e($)),1)])])):A("",!0),e(C)?(r(),l("div",ui,[t("div",ci,[t("div",mi,[t("div",xi,[S[11]||(S[11]=t("div",{class:"flex items-center gap-2 md:gap-3"},[t("i",{class:"fas fa-clock text-base text-blue-500 md:text-lg"}),t("span",{class:"text-base font-medium text-gray-700 dark:text-gray-200 md:text-lg"},"统计时间范围")],-1)),t("div",gi,[t("button",{class:U(["flex flex-1 items-center justify-center gap-1 px-4 py-2 text-xs font-medium md:flex-none md:gap-2 md:px-6 md:text-sm",["period-btn",{active:e(I)==="daily"}]]),disabled:e(y)||e(k),onClick:S[2]||(S[2]=J=>e(c)("daily"))},S[9]||(S[9]=[t("i",{class:"fas fa-calendar-day text-xs md:text-sm"},null,-1),h(" 今日 ",-1)]),10,fi),t("button",{class:U(["flex flex-1 items-center justify-center gap-1 px-4 py-2 text-xs font-medium md:flex-none md:gap-2 md:px-6 md:text-sm",["period-btn",{active:e(I)==="monthly"}]]),disabled:e(y)||e(k),onClick:S[3]||(S[3]=J=>e(c)("monthly"))},S[10]||(S[10]=[t("i",{class:"fas fa-calendar-alt text-xs md:text-sm"},null,-1),h(" 本月 ",-1)]),10,yi)])])]),Y(xs),t("div",pi,[Y(Ms,{class:"h-full"}),e(T)?(r(),at(ar,{key:0,class:"h-full"})):(r(),at(Ea,{key:1,class:"h-full"}))]),Y(Kr)]),e(b)&&!e(T)?(r(),at(Xr,{key:0,"api-id":e(b),range:e(I)==="daily"?"today":"month"},null,8,["api-id","range"])):A("",!0)])):A("",!0)])):A("",!0),x.value==="tutorial"?(r(),l("div",vi,[t("div",bi,[Y(Tt)])])):A("",!0)],2)}}},Li=G(_i,[["__scopeId","data-v-282e4892"]]);export{Li as default};
